{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DELL\\\\Documents\\\\mesProjets\\\\CommuniConnect\\\\frontend\\\\src\\\\components\\\\CreatePost.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useCallback } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { postsAPI } from '../services/postsAPI';\nimport { mediaAPI } from '../services/mediaAPI';\nimport { MessageCircle, Calendar, HelpCircle, AlertCircle, Users, Send, X, Image, Trash2, Video as VideoIcon, Video, Camera, Smile, MapPin, Globe, Users as UsersIcon, Lock, Upload, Play, Pause, Volume2, VolumeX } from 'lucide-react';\nimport toast from 'react-hot-toast';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MAX_IMAGE_SIZE = 10 * 1024 * 1024; // 10MB\nconst MAX_VIDEO_SIZE = 50 * 1024 * 1024; // 50MB\nconst MAX_VIDEO_DURATION = 60; // 60 secondes\nconst MAX_FILES_PER_POST = 5; // Maximum 5 fichiers par post\nconst ALLOWED_IMAGE_TYPES = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/webp'];\nconst ALLOWED_VIDEO_TYPES = ['video/mp4', 'video/webm', 'video/quicktime', 'video/avi'];\nconst CreatePost = ({\n  isOpen,\n  onClose,\n  onPostCreated\n}) => {\n  _s();\n  const {\n    user\n  } = useAuth();\n  const [isLoading, setIsLoading] = useState(false);\n  const [isUploading, setIsUploading] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [selectedFiles, setSelectedFiles] = useState([]);\n  const [dragActive, setDragActive] = useState(false);\n  const fileInputRef = useRef(null);\n  const dropZoneRef = useRef(null);\n  const [formData, setFormData] = useState({\n    title: '',\n    content: '',\n    post_type: 'info',\n    is_anonymous: false,\n    privacy: 'public' // public, friends, private\n  });\n  const postTypes = [{\n    value: 'info',\n    label: 'Information',\n    icon: AlertCircle,\n    color: 'text-blue-600'\n  }, {\n    value: 'event',\n    label: 'Événement',\n    icon: Calendar,\n    color: 'text-green-600'\n  }, {\n    value: 'help',\n    label: 'Demande d\\'aide',\n    icon: HelpCircle,\n    color: 'text-red-600'\n  }, {\n    value: 'announcement',\n    label: 'Annonce',\n    icon: Users,\n    color: 'text-purple-600'\n  }, {\n    value: 'discussion',\n    label: 'Discussion',\n    icon: MessageCircle,\n    color: 'text-orange-600'\n  }];\n  const privacyOptions = [{\n    value: 'public',\n    label: 'Public',\n    icon: Globe,\n    description: 'Tout le monde peut voir'\n  }, {\n    value: 'friends',\n    label: 'Amis',\n    icon: UsersIcon,\n    description: 'Seuls vos amis peuvent voir'\n  }, {\n    value: 'private',\n    label: 'Privé',\n    icon: Lock,\n    description: 'Seulement vous'\n  }];\n  const handleChange = e => {\n    const {\n      name,\n      value,\n      type,\n      checked\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: type === 'checkbox' ? checked : value\n    }));\n  };\n  const validateFile = file => {\n    // Vérifier le type\n    if (file.type.startsWith('image/')) {\n      if (!ALLOWED_IMAGE_TYPES.includes(file.type)) {\n        throw new Error('Type d\\'image non supporté');\n      }\n      if (file.size > MAX_IMAGE_SIZE) {\n        throw new Error('Image trop volumineuse (max 10MB)');\n      }\n    } else if (file.type.startsWith('video/')) {\n      if (!ALLOWED_VIDEO_TYPES.includes(file.type)) {\n        throw new Error('Type de vidéo non supporté');\n      }\n      if (file.size > MAX_VIDEO_SIZE) {\n        throw new Error('Vidéo trop volumineuse (max 50MB)');\n      }\n    } else {\n      throw new Error('Type de fichier non supporté');\n    }\n  };\n  const handleFileSelect = useCallback(files => {\n    const newFiles = Array.from(files);\n    const validFiles = [];\n    const errors = [];\n\n    // Vérifier la limite du nombre de fichiers\n    const totalFiles = selectedFiles.length + newFiles.length;\n    if (totalFiles > MAX_FILES_PER_POST) {\n      toast.error(`Vous ne pouvez pas sélectionner plus de ${MAX_FILES_PER_POST} fichiers au total`);\n      return;\n    }\n    newFiles.forEach(file => {\n      try {\n        validateFile(file);\n        validFiles.push(file);\n      } catch (error) {\n        errors.push(`${file.name}: ${error.message}`);\n      }\n    });\n    if (errors.length > 0) {\n      errors.forEach(error => toast.error(error));\n    }\n    if (validFiles.length > 0) {\n      setSelectedFiles(prev => [...prev, ...validFiles]);\n    }\n  }, [selectedFiles.length]);\n  const handleFileInput = e => {\n    handleFileSelect(e.target.files);\n    e.target.value = ''; // Reset input\n  };\n  const handleDrag = useCallback(e => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.type === \"dragenter\" || e.type === \"dragover\") {\n      setDragActive(true);\n    } else if (e.type === \"dragleave\") {\n      setDragActive(false);\n    }\n  }, []);\n  const handleDrop = useCallback(e => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragActive(false);\n    if (e.dataTransfer.files && e.dataTransfer.files[0]) {\n      handleFileSelect(e.dataTransfer.files);\n    }\n  }, [handleFileSelect]);\n  const removeFile = index => {\n    setSelectedFiles(prev => prev.filter((_, i) => i !== index));\n  };\n  const uploadFiles = async () => {\n    if (selectedFiles.length === 0) return [];\n    setIsUploading(true);\n    setUploadProgress(0);\n    const uploadedMedia = [];\n    try {\n      for (let i = 0; i < selectedFiles.length; i++) {\n        const file = selectedFiles[i];\n        const formData = new FormData();\n        formData.append('file', file);\n        formData.append('title', file.name);\n        console.log(`Uploading file ${i + 1}/${selectedFiles.length}: ${file.name}`);\n        const response = await mediaAPI.uploadMedia(formData, progress => {\n          const totalProgress = (i + progress) / selectedFiles.length * 100;\n          setUploadProgress(totalProgress);\n        });\n        console.log(`File uploaded successfully:`, response);\n        uploadedMedia.push(response);\n      }\n      console.log(`All files uploaded:`, uploadedMedia);\n      toast.success(`${uploadedMedia.length} fichier(s) uploadé(s) avec succès`);\n      return uploadedMedia;\n    } catch (error) {\n      console.error('Erreur upload:', error);\n      toast.error('Erreur lors de l\\'upload des fichiers');\n      throw error;\n    } finally {\n      setIsUploading(false);\n      setUploadProgress(0);\n    }\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!formData.content.trim() && selectedFiles.length === 0) {\n      toast.error('Veuillez ajouter du contenu ou des médias');\n      return;\n    }\n    setIsLoading(true);\n    try {\n      // Upload des fichiers d'abord\n      const uploadedMedia = await uploadFiles();\n\n      // Créer le post avec les médias\n      const postData = {\n        ...formData,\n        media_files: uploadedMedia.map(media => media.id)\n      };\n      console.log('Creating post with data:', postData);\n      console.log('Media IDs:', uploadedMedia.map(media => media.id));\n      const response = await postsAPI.createPost(postData);\n      console.log('Post created successfully:', response);\n      toast.success('Publication créée avec succès !');\n      onPostCreated(response);\n      handleClose();\n    } catch (error) {\n      console.error('Erreur création post:', error);\n      toast.error('Erreur lors de la création de la publication');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handleClose = () => {\n    setFormData({\n      title: '',\n      content: '',\n      post_type: 'info',\n      is_anonymous: false,\n      privacy: 'public'\n    });\n    setSelectedFiles([]);\n    setUploadProgress(0);\n    onClose();\n  };\n  const renderFilePreview = (file, index) => {\n    const isVideo = file.type.startsWith('video/');\n    const isImage = file.type.startsWith('image/');\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative group\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative rounded-lg overflow-hidden bg-gray-100\",\n        children: [isImage ? /*#__PURE__*/_jsxDEV(\"img\", {\n          src: URL.createObjectURL(file),\n          alt: file.name,\n          className: \"w-full h-32 object-cover\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 13\n        }, this) : isVideo ? /*#__PURE__*/_jsxDEV(\"video\", {\n          src: URL.createObjectURL(file),\n          className: \"w-full h-32 object-cover\",\n          controls: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 13\n        }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-200 flex items-center justify-center\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => removeFile(index),\n            className: \"opacity-0 group-hover:opacity-100 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-all duration-200\",\n            children: /*#__PURE__*/_jsxDEV(X, {\n              className: \"w-4 h-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-2 text-xs text-gray-500\",\n        children: [file.name, \" (\", (file.size / 1024 / 1024).toFixed(2), \" MB)\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 9\n      }, this)]\n    }, index, true, {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 7\n    }, this);\n  };\n  if (!isOpen) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg shadow-xl w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between p-4 border-b\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold text-gray-900\",\n          children: \"Cr\\xE9er une publication\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleClose,\n          className: \"text-gray-400 hover:text-gray-600 transition-colors\",\n          children: /*#__PURE__*/_jsxDEV(X, {\n            className: \"w-6 h-6\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"p-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-4\",\n          children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n            name: \"content\",\n            value: formData.content,\n            onChange: handleChange,\n            placeholder: `Quoi de neuf, ${(user === null || user === void 0 ? void 0 : user.first_name) || 'utilisateur'} ?`,\n            className: \"w-full p-3 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\",\n            rows: 4\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: dropZoneRef,\n          onDragEnter: handleDrag,\n          onDragLeave: handleDrag,\n          onDragOver: handleDrag,\n          onDrop: handleDrop,\n          className: `border-2 border-dashed rounded-lg p-6 text-center transition-all duration-200 ${dragActive ? 'border-blue-500 bg-blue-50' : 'border-gray-300 hover:border-gray-400'}`,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            ref: fileInputRef,\n            type: \"file\",\n            multiple: true,\n            accept: \"image/*,video/*\",\n            onChange: handleFileInput,\n            className: \"hidden\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-center space-x-4\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => {\n                  var _fileInputRef$current;\n                  return (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n                },\n                className: \"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\",\n                children: [/*#__PURE__*/_jsxDEV(Image, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 340,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Photo/Vid\\xE9o\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 341,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 335,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 334,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-500\",\n              children: \"Glissez-d\\xE9posez vos fichiers ici ou cliquez pour s\\xE9lectionner\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 345,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-gray-400\",\n              children: \"Images: max 10MB \\u2022 Vid\\xE9os: max 50MB, 60s max\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 11\n        }, this), selectedFiles.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"text-sm font-medium text-gray-700 mb-2\",\n            children: [\"Fichiers s\\xE9lectionn\\xE9s (\", selectedFiles.length, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-2 md:grid-cols-3 gap-4\",\n            children: selectedFiles.map((file, index) => renderFilePreview(file, index))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 13\n        }, this), isUploading && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between text-sm text-gray-600 mb-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Upload en cours...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 370,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [Math.round(uploadProgress), \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 369,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-full bg-gray-200 rounded-full h-2\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-blue-600 h-2 rounded-full transition-all duration-300\",\n              style: {\n                width: `${uploadProgress}%`\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-6 space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-2\",\n              children: \"Type de publication\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-2 md:grid-cols-3 gap-2\",\n              children: postTypes.map(type => {\n                const Icon = type.icon;\n                return /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  onClick: () => setFormData(prev => ({\n                    ...prev,\n                    post_type: type.value\n                  })),\n                  className: `flex items-center space-x-2 p-3 rounded-lg border transition-colors ${formData.post_type === type.value ? 'border-blue-500 bg-blue-50 text-blue-700' : 'border-gray-300 hover:border-gray-400'}`,\n                  children: [/*#__PURE__*/_jsxDEV(Icon, {\n                    className: `w-4 h-4 ${type.color}`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 403,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-sm\",\n                    children: type.label\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 404,\n                    columnNumber: 23\n                  }, this)]\n                }, type.value, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 393,\n                  columnNumber: 19\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 389,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 385,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-2\",\n              children: \"Confidentialit\\xE9\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 413,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-2\",\n              children: privacyOptions.map(option => {\n                const Icon = option.icon;\n                return /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  onClick: () => setFormData(prev => ({\n                    ...prev,\n                    privacy: option.value\n                  })),\n                  className: `flex items-center space-x-3 w-full p-3 rounded-lg border transition-colors ${formData.privacy === option.value ? 'border-blue-500 bg-blue-50' : 'border-gray-300 hover:border-gray-400'}`,\n                  children: [/*#__PURE__*/_jsxDEV(Icon, {\n                    className: \"w-4 h-4 text-gray-600\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 430,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-left\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-sm font-medium\",\n                      children: option.label\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 432,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-xs text-gray-500\",\n                      children: option.description\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 433,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 431,\n                    columnNumber: 23\n                  }, this)]\n                }, option.value, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 420,\n                  columnNumber: 21\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 416,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 412,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-4\",\n            children: /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"flex items-center space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"checkbox\",\n                name: \"is_anonymous\",\n                checked: formData.is_anonymous,\n                onChange: handleChange,\n                className: \"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 444,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm text-gray-700\",\n                children: \"Publication anonyme\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 451,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 443,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 442,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-end space-x-3 mt-6 pt-4 border-t\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: handleClose,\n            className: \"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors\",\n            children: \"Annuler\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 458,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            disabled: isLoading || isUploading,\n            className: \"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\",\n            children: isLoading ? 'Publication...' : 'Publier'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 465,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 285,\n    columnNumber: 5\n  }, this);\n};\n_s(CreatePost, \"OXBquCOm/DT2nXJn3GBLtWoMU+c=\", false, function () {\n  return [useAuth];\n});\n_c = CreatePost;\nexport default CreatePost;\nvar _c;\n$RefreshReg$(_c, \"CreatePost\");","map":{"version":3,"names":["React","useState","useRef","useCallback","useAuth","postsAPI","mediaAPI","MessageCircle","Calendar","HelpCircle","AlertCircle","Users","Send","X","Image","Trash2","Video","VideoIcon","Camera","Smile","MapPin","Globe","UsersIcon","Lock","Upload","Play","Pause","Volume2","VolumeX","toast","jsxDEV","_jsxDEV","MAX_IMAGE_SIZE","MAX_VIDEO_SIZE","MAX_VIDEO_DURATION","MAX_FILES_PER_POST","ALLOWED_IMAGE_TYPES","ALLOWED_VIDEO_TYPES","CreatePost","isOpen","onClose","onPostCreated","_s","user","isLoading","setIsLoading","isUploading","setIsUploading","uploadProgress","setUploadProgress","selectedFiles","setSelectedFiles","dragActive","setDragActive","fileInputRef","dropZoneRef","formData","setFormData","title","content","post_type","is_anonymous","privacy","postTypes","value","label","icon","color","privacyOptions","description","handleChange","e","name","type","checked","target","prev","validateFile","file","startsWith","includes","Error","size","handleFileSelect","files","newFiles","Array","from","validFiles","errors","totalFiles","length","error","forEach","push","message","handleFileInput","handleDrag","preventDefault","stopPropagation","handleDrop","dataTransfer","removeFile","index","filter","_","i","uploadFiles","uploadedMedia","FormData","append","console","log","response","uploadMedia","progress","totalProgress","success","handleSubmit","trim","postData","media_files","map","media","id","createPost","handleClose","renderFilePreview","isVideo","isImage","className","children","src","URL","createObjectURL","alt","fileName","_jsxFileName","lineNumber","columnNumber","controls","onClick","toFixed","onSubmit","onChange","placeholder","first_name","rows","ref","onDragEnter","onDragLeave","onDragOver","onDrop","multiple","accept","_fileInputRef$current","current","click","Math","round","style","width","Icon","option","disabled","_c","$RefreshReg$"],"sources":["C:/Users/DELL/Documents/mesProjets/CommuniConnect/frontend/src/components/CreatePost.js"],"sourcesContent":["import React, { useState, useRef, useCallback } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { postsAPI } from '../services/postsAPI';\nimport { mediaAPI } from '../services/mediaAPI';\nimport { \n  MessageCircle, \n  Calendar, \n  HelpCircle, \n  AlertCircle, \n  Users,\n  Send,\n  X,\n  Image,\n  Trash2,\n  Video as VideoIcon,\n  Video,\n  Camera,\n  Smile,\n  MapPin,\n  Globe,\n  Users as UsersIcon,\n  Lock,\n  Upload,\n  Play,\n  Pause,\n  Volume2,\n  VolumeX\n} from 'lucide-react';\nimport toast from 'react-hot-toast';\n\nconst MAX_IMAGE_SIZE = 10 * 1024 * 1024; // 10MB\nconst MAX_VIDEO_SIZE = 50 * 1024 * 1024; // 50MB\nconst MAX_VIDEO_DURATION = 60; // 60 secondes\nconst MAX_FILES_PER_POST = 5; // Maximum 5 fichiers par post\nconst ALLOWED_IMAGE_TYPES = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/webp'];\nconst ALLOWED_VIDEO_TYPES = ['video/mp4', 'video/webm', 'video/quicktime', 'video/avi'];\n\nconst CreatePost = ({ isOpen, onClose, onPostCreated }) => {\n  const { user } = useAuth();\n  const [isLoading, setIsLoading] = useState(false);\n  const [isUploading, setIsUploading] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [selectedFiles, setSelectedFiles] = useState([]);\n  const [dragActive, setDragActive] = useState(false);\n  const fileInputRef = useRef(null);\n  const dropZoneRef = useRef(null);\n  \n  const [formData, setFormData] = useState({\n    title: '',\n    content: '',\n    post_type: 'info',\n    is_anonymous: false,\n    privacy: 'public' // public, friends, private\n  });\n\n  const postTypes = [\n    { value: 'info', label: 'Information', icon: AlertCircle, color: 'text-blue-600' },\n    { value: 'event', label: 'Événement', icon: Calendar, color: 'text-green-600' },\n    { value: 'help', label: 'Demande d\\'aide', icon: HelpCircle, color: 'text-red-600' },\n    { value: 'announcement', label: 'Annonce', icon: Users, color: 'text-purple-600' },\n    { value: 'discussion', label: 'Discussion', icon: MessageCircle, color: 'text-orange-600' }\n  ];\n\n  const privacyOptions = [\n    { value: 'public', label: 'Public', icon: Globe, description: 'Tout le monde peut voir' },\n    { value: 'friends', label: 'Amis', icon: UsersIcon, description: 'Seuls vos amis peuvent voir' },\n    { value: 'private', label: 'Privé', icon: Lock, description: 'Seulement vous' }\n  ];\n\n  const handleChange = (e) => {\n    const { name, value, type, checked } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: type === 'checkbox' ? checked : value\n    }));\n  };\n\n  const validateFile = (file) => {\n    // Vérifier le type\n    if (file.type.startsWith('image/')) {\n      if (!ALLOWED_IMAGE_TYPES.includes(file.type)) {\n        throw new Error('Type d\\'image non supporté');\n      }\n      if (file.size > MAX_IMAGE_SIZE) {\n        throw new Error('Image trop volumineuse (max 10MB)');\n      }\n    } else if (file.type.startsWith('video/')) {\n      if (!ALLOWED_VIDEO_TYPES.includes(file.type)) {\n        throw new Error('Type de vidéo non supporté');\n      }\n      if (file.size > MAX_VIDEO_SIZE) {\n        throw new Error('Vidéo trop volumineuse (max 50MB)');\n      }\n    } else {\n      throw new Error('Type de fichier non supporté');\n    }\n  };\n\n  const handleFileSelect = useCallback((files) => {\n    const newFiles = Array.from(files);\n    const validFiles = [];\n    const errors = [];\n\n    // Vérifier la limite du nombre de fichiers\n    const totalFiles = selectedFiles.length + newFiles.length;\n    if (totalFiles > MAX_FILES_PER_POST) {\n      toast.error(`Vous ne pouvez pas sélectionner plus de ${MAX_FILES_PER_POST} fichiers au total`);\n      return;\n    }\n\n    newFiles.forEach(file => {\n      try {\n        validateFile(file);\n        validFiles.push(file);\n      } catch (error) {\n        errors.push(`${file.name}: ${error.message}`);\n      }\n    });\n\n    if (errors.length > 0) {\n      errors.forEach(error => toast.error(error));\n    }\n\n    if (validFiles.length > 0) {\n      setSelectedFiles(prev => [...prev, ...validFiles]);\n    }\n  }, [selectedFiles.length]);\n\n  const handleFileInput = (e) => {\n    handleFileSelect(e.target.files);\n    e.target.value = ''; // Reset input\n  };\n\n  const handleDrag = useCallback((e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.type === \"dragenter\" || e.type === \"dragover\") {\n      setDragActive(true);\n    } else if (e.type === \"dragleave\") {\n      setDragActive(false);\n    }\n  }, []);\n\n  const handleDrop = useCallback((e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragActive(false);\n    \n    if (e.dataTransfer.files && e.dataTransfer.files[0]) {\n      handleFileSelect(e.dataTransfer.files);\n    }\n  }, [handleFileSelect]);\n\n  const removeFile = (index) => {\n    setSelectedFiles(prev => prev.filter((_, i) => i !== index));\n  };\n\n  const uploadFiles = async () => {\n    if (selectedFiles.length === 0) return [];\n\n    setIsUploading(true);\n    setUploadProgress(0);\n    const uploadedMedia = [];\n\n    try {\n      for (let i = 0; i < selectedFiles.length; i++) {\n        const file = selectedFiles[i];\n        const formData = new FormData();\n        formData.append('file', file);\n        formData.append('title', file.name);\n        \n        console.log(`Uploading file ${i + 1}/${selectedFiles.length}: ${file.name}`);\n        \n        const response = await mediaAPI.uploadMedia(formData, (progress) => {\n          const totalProgress = ((i + progress) / selectedFiles.length) * 100;\n          setUploadProgress(totalProgress);\n        });\n        \n        console.log(`File uploaded successfully:`, response);\n        uploadedMedia.push(response);\n      }\n      \n      console.log(`All files uploaded:`, uploadedMedia);\n      toast.success(`${uploadedMedia.length} fichier(s) uploadé(s) avec succès`);\n      return uploadedMedia;\n    } catch (error) {\n      console.error('Erreur upload:', error);\n      toast.error('Erreur lors de l\\'upload des fichiers');\n      throw error;\n    } finally {\n      setIsUploading(false);\n      setUploadProgress(0);\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!formData.content.trim() && selectedFiles.length === 0) {\n      toast.error('Veuillez ajouter du contenu ou des médias');\n      return;\n    }\n\n    setIsLoading(true);\n    try {\n      // Upload des fichiers d'abord\n      const uploadedMedia = await uploadFiles();\n      \n      // Créer le post avec les médias\n      const postData = {\n        ...formData,\n        media_files: uploadedMedia.map(media => media.id)\n      };\n\n      console.log('Creating post with data:', postData);\n      console.log('Media IDs:', uploadedMedia.map(media => media.id));\n\n      const response = await postsAPI.createPost(postData);\n      \n      console.log('Post created successfully:', response);\n      toast.success('Publication créée avec succès !');\n      onPostCreated(response);\n      handleClose();\n    } catch (error) {\n      console.error('Erreur création post:', error);\n      toast.error('Erreur lors de la création de la publication');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleClose = () => {\n    setFormData({\n      title: '',\n      content: '',\n      post_type: 'info',\n      is_anonymous: false,\n      privacy: 'public'\n    });\n    setSelectedFiles([]);\n    setUploadProgress(0);\n    onClose();\n  };\n\n  const renderFilePreview = (file, index) => {\n    const isVideo = file.type.startsWith('video/');\n    const isImage = file.type.startsWith('image/');\n    \n    return (\n      <div key={index} className=\"relative group\">\n        <div className=\"relative rounded-lg overflow-hidden bg-gray-100\">\n          {isImage ? (\n            <img\n              src={URL.createObjectURL(file)}\n              alt={file.name}\n              className=\"w-full h-32 object-cover\"\n            />\n          ) : isVideo ? (\n            <video\n              src={URL.createObjectURL(file)}\n              className=\"w-full h-32 object-cover\"\n              controls\n            />\n          ) : null}\n          \n          <div className=\"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-200 flex items-center justify-center\">\n            <button\n              onClick={() => removeFile(index)}\n              className=\"opacity-0 group-hover:opacity-100 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-all duration-200\"\n            >\n              <X className=\"w-4 h-4\" />\n            </button>\n          </div>\n        </div>\n        \n        <div className=\"mt-2 text-xs text-gray-500\">\n          {file.name} ({(file.size / 1024 / 1024).toFixed(2)} MB)\n        </div>\n      </div>\n    );\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-white rounded-lg shadow-xl w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-4 border-b\">\n          <h3 className=\"text-lg font-semibold text-gray-900\">Créer une publication</h3>\n          <button\n            onClick={handleClose}\n            className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n          >\n            <X className=\"w-6 h-6\" />\n          </button>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"p-4\">\n          {/* Zone de texte */}\n          <div className=\"mb-4\">\n            <textarea\n              name=\"content\"\n              value={formData.content}\n              onChange={handleChange}\n              placeholder={`Quoi de neuf, ${user?.first_name || 'utilisateur'} ?`}\n              className=\"w-full p-3 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              rows={4}\n            />\n          </div>\n\n          {/* Zone de drag & drop */}\n          <div\n            ref={dropZoneRef}\n            onDragEnter={handleDrag}\n            onDragLeave={handleDrag}\n            onDragOver={handleDrag}\n            onDrop={handleDrop}\n            className={`border-2 border-dashed rounded-lg p-6 text-center transition-all duration-200 ${\n              dragActive \n                ? 'border-blue-500 bg-blue-50' \n                : 'border-gray-300 hover:border-gray-400'\n            }`}\n          >\n            <input\n              ref={fileInputRef}\n              type=\"file\"\n              multiple\n              accept=\"image/*,video/*\"\n              onChange={handleFileInput}\n              className=\"hidden\"\n            />\n            \n            <div className=\"space-y-2\">\n              <div className=\"flex justify-center space-x-4\">\n                <button\n                  type=\"button\"\n                  onClick={() => fileInputRef.current?.click()}\n                  className=\"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n                >\n                  <Image className=\"w-4 h-4\" />\n                  <span>Photo/Vidéo</span>\n                </button>\n              </div>\n              \n              <p className=\"text-sm text-gray-500\">\n                Glissez-déposez vos fichiers ici ou cliquez pour sélectionner\n              </p>\n              <p className=\"text-xs text-gray-400\">\n                Images: max 10MB • Vidéos: max 50MB, 60s max\n              </p>\n            </div>\n          </div>\n\n          {/* Aperçu des fichiers */}\n          {selectedFiles.length > 0 && (\n            <div className=\"mt-4\">\n              <h4 className=\"text-sm font-medium text-gray-700 mb-2\">\n                Fichiers sélectionnés ({selectedFiles.length})\n              </h4>\n              <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4\">\n                {selectedFiles.map((file, index) => renderFilePreview(file, index))}\n              </div>\n            </div>\n          )}\n\n          {/* Barre de progression */}\n          {isUploading && (\n            <div className=\"mt-4\">\n              <div className=\"flex items-center justify-between text-sm text-gray-600 mb-1\">\n                <span>Upload en cours...</span>\n                <span>{Math.round(uploadProgress)}%</span>\n              </div>\n              <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                <div \n                  className=\"bg-blue-600 h-2 rounded-full transition-all duration-300\"\n                  style={{ width: `${uploadProgress}%` }}\n                />\n              </div>\n            </div>\n          )}\n\n          {/* Options de publication */}\n          <div className=\"mt-6 space-y-4\">\n            {/* Type de publication */}\n          <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Type de publication\n              </label>\n              <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2\">\n              {postTypes.map((type) => {\n                const Icon = type.icon;\n                return (\n                  <button\n                    key={type.value}\n                    type=\"button\"\n                    onClick={() => setFormData(prev => ({ ...prev, post_type: type.value }))}\n                      className={`flex items-center space-x-2 p-3 rounded-lg border transition-colors ${\n                        formData.post_type === type.value\n                          ? 'border-blue-500 bg-blue-50 text-blue-700'\n                          : 'border-gray-300 hover:border-gray-400'\n                      }`}\n                    >\n                      <Icon className={`w-4 h-4 ${type.color}`} />\n                      <span className=\"text-sm\">{type.label}</span>\n                  </button>\n                );\n              })}\n            </div>\n          </div>\n\n            {/* Confidentialité */}\n          <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Confidentialité\n                  </label>\n              <div className=\"space-y-2\">\n                {privacyOptions.map((option) => {\n                  const Icon = option.icon;\n                  return (\n                    <button\n                      key={option.value}\n                      type=\"button\"\n                      onClick={() => setFormData(prev => ({ ...prev, privacy: option.value }))}\n                      className={`flex items-center space-x-3 w-full p-3 rounded-lg border transition-colors ${\n                        formData.privacy === option.value\n                          ? 'border-blue-500 bg-blue-50'\n                          : 'border-gray-300 hover:border-gray-400'\n                      }`}\n                    >\n                      <Icon className=\"w-4 h-4 text-gray-600\" />\n                      <div className=\"text-left\">\n                        <div className=\"text-sm font-medium\">{option.label}</div>\n                        <div className=\"text-xs text-gray-500\">{option.description}</div>\n              </div>\n                </button>\n                  );\n                })}\n              </div>\n              </div>\n\n            {/* Options supplémentaires */}\n          <div className=\"flex items-center space-x-4\">\n            <label className=\"flex items-center space-x-2\">\n                <input\n                  type=\"checkbox\"\n                  name=\"is_anonymous\"\n                  checked={formData.is_anonymous}\n                  onChange={handleChange}\n                  className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                />\n                <span className=\"text-sm text-gray-700\">Publication anonyme</span>\n            </label>\n            </div>\n          </div>\n\n          {/* Actions */}\n          <div className=\"flex justify-end space-x-3 mt-6 pt-4 border-t\">\n            <button\n              type=\"button\"\n              onClick={handleClose}\n              className=\"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors\"\n            >\n              Annuler\n            </button>\n            <button\n              type=\"submit\"\n              disabled={isLoading || isUploading}\n              className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n            >\n              {isLoading ? 'Publication...' : 'Publier'}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default CreatePost; "],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,MAAM,EAAEC,WAAW,QAAQ,OAAO;AAC5D,SAASC,OAAO,QAAQ,yBAAyB;AACjD,SAASC,QAAQ,QAAQ,sBAAsB;AAC/C,SAASC,QAAQ,QAAQ,sBAAsB;AAC/C,SACEC,aAAa,EACbC,QAAQ,EACRC,UAAU,EACVC,WAAW,EACXC,KAAK,EACLC,IAAI,EACJC,CAAC,EACDC,KAAK,EACLC,MAAM,EACNC,KAAK,IAAIC,SAAS,EAClBD,KAAK,EACLE,MAAM,EACNC,KAAK,EACLC,MAAM,EACNC,KAAK,EACLV,KAAK,IAAIW,SAAS,EAClBC,IAAI,EACJC,MAAM,EACNC,IAAI,EACJC,KAAK,EACLC,OAAO,EACPC,OAAO,QACF,cAAc;AACrB,OAAOC,KAAK,MAAM,iBAAiB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEpC,MAAMC,cAAc,GAAG,EAAE,GAAG,IAAI,GAAG,IAAI,CAAC,CAAC;AACzC,MAAMC,cAAc,GAAG,EAAE,GAAG,IAAI,GAAG,IAAI,CAAC,CAAC;AACzC,MAAMC,kBAAkB,GAAG,EAAE,CAAC,CAAC;AAC/B,MAAMC,kBAAkB,GAAG,CAAC,CAAC,CAAC;AAC9B,MAAMC,mBAAmB,GAAG,CAAC,YAAY,EAAE,WAAW,EAAE,WAAW,EAAE,WAAW,EAAE,YAAY,CAAC;AAC/F,MAAMC,mBAAmB,GAAG,CAAC,WAAW,EAAE,YAAY,EAAE,iBAAiB,EAAE,WAAW,CAAC;AAEvF,MAAMC,UAAU,GAAGA,CAAC;EAAEC,MAAM;EAAEC,OAAO;EAAEC;AAAc,CAAC,KAAK;EAAAC,EAAA;EACzD,MAAM;IAAEC;EAAK,CAAC,GAAGvC,OAAO,CAAC,CAAC;EAC1B,MAAM,CAACwC,SAAS,EAAEC,YAAY,CAAC,GAAG5C,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAAC6C,WAAW,EAAEC,cAAc,CAAC,GAAG9C,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAAC+C,cAAc,EAAEC,iBAAiB,CAAC,GAAGhD,QAAQ,CAAC,CAAC,CAAC;EACvD,MAAM,CAACiD,aAAa,EAAEC,gBAAgB,CAAC,GAAGlD,QAAQ,CAAC,EAAE,CAAC;EACtD,MAAM,CAACmD,UAAU,EAAEC,aAAa,CAAC,GAAGpD,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAMqD,YAAY,GAAGpD,MAAM,CAAC,IAAI,CAAC;EACjC,MAAMqD,WAAW,GAAGrD,MAAM,CAAC,IAAI,CAAC;EAEhC,MAAM,CAACsD,QAAQ,EAAEC,WAAW,CAAC,GAAGxD,QAAQ,CAAC;IACvCyD,KAAK,EAAE,EAAE;IACTC,OAAO,EAAE,EAAE;IACXC,SAAS,EAAE,MAAM;IACjBC,YAAY,EAAE,KAAK;IACnBC,OAAO,EAAE,QAAQ,CAAC;EACpB,CAAC,CAAC;EAEF,MAAMC,SAAS,GAAG,CAChB;IAAEC,KAAK,EAAE,MAAM;IAAEC,KAAK,EAAE,aAAa;IAAEC,IAAI,EAAExD,WAAW;IAAEyD,KAAK,EAAE;EAAgB,CAAC,EAClF;IAAEH,KAAK,EAAE,OAAO;IAAEC,KAAK,EAAE,WAAW;IAAEC,IAAI,EAAE1D,QAAQ;IAAE2D,KAAK,EAAE;EAAiB,CAAC,EAC/E;IAAEH,KAAK,EAAE,MAAM;IAAEC,KAAK,EAAE,iBAAiB;IAAEC,IAAI,EAAEzD,UAAU;IAAE0D,KAAK,EAAE;EAAe,CAAC,EACpF;IAAEH,KAAK,EAAE,cAAc;IAAEC,KAAK,EAAE,SAAS;IAAEC,IAAI,EAAEvD,KAAK;IAAEwD,KAAK,EAAE;EAAkB,CAAC,EAClF;IAAEH,KAAK,EAAE,YAAY;IAAEC,KAAK,EAAE,YAAY;IAAEC,IAAI,EAAE3D,aAAa;IAAE4D,KAAK,EAAE;EAAkB,CAAC,CAC5F;EAED,MAAMC,cAAc,GAAG,CACrB;IAAEJ,KAAK,EAAE,QAAQ;IAAEC,KAAK,EAAE,QAAQ;IAAEC,IAAI,EAAE7C,KAAK;IAAEgD,WAAW,EAAE;EAA0B,CAAC,EACzF;IAAEL,KAAK,EAAE,SAAS;IAAEC,KAAK,EAAE,MAAM;IAAEC,IAAI,EAAE5C,SAAS;IAAE+C,WAAW,EAAE;EAA8B,CAAC,EAChG;IAAEL,KAAK,EAAE,SAAS;IAAEC,KAAK,EAAE,OAAO;IAAEC,IAAI,EAAE3C,IAAI;IAAE8C,WAAW,EAAE;EAAiB,CAAC,CAChF;EAED,MAAMC,YAAY,GAAIC,CAAC,IAAK;IAC1B,MAAM;MAAEC,IAAI;MAAER,KAAK;MAAES,IAAI;MAAEC;IAAQ,CAAC,GAAGH,CAAC,CAACI,MAAM;IAC/ClB,WAAW,CAACmB,IAAI,KAAK;MACnB,GAAGA,IAAI;MACP,CAACJ,IAAI,GAAGC,IAAI,KAAK,UAAU,GAAGC,OAAO,GAAGV;IAC1C,CAAC,CAAC,CAAC;EACL,CAAC;EAED,MAAMa,YAAY,GAAIC,IAAI,IAAK;IAC7B;IACA,IAAIA,IAAI,CAACL,IAAI,CAACM,UAAU,CAAC,QAAQ,CAAC,EAAE;MAClC,IAAI,CAAC3C,mBAAmB,CAAC4C,QAAQ,CAACF,IAAI,CAACL,IAAI,CAAC,EAAE;QAC5C,MAAM,IAAIQ,KAAK,CAAC,4BAA4B,CAAC;MAC/C;MACA,IAAIH,IAAI,CAACI,IAAI,GAAGlD,cAAc,EAAE;QAC9B,MAAM,IAAIiD,KAAK,CAAC,mCAAmC,CAAC;MACtD;IACF,CAAC,MAAM,IAAIH,IAAI,CAACL,IAAI,CAACM,UAAU,CAAC,QAAQ,CAAC,EAAE;MACzC,IAAI,CAAC1C,mBAAmB,CAAC2C,QAAQ,CAACF,IAAI,CAACL,IAAI,CAAC,EAAE;QAC5C,MAAM,IAAIQ,KAAK,CAAC,4BAA4B,CAAC;MAC/C;MACA,IAAIH,IAAI,CAACI,IAAI,GAAGjD,cAAc,EAAE;QAC9B,MAAM,IAAIgD,KAAK,CAAC,mCAAmC,CAAC;MACtD;IACF,CAAC,MAAM;MACL,MAAM,IAAIA,KAAK,CAAC,8BAA8B,CAAC;IACjD;EACF,CAAC;EAED,MAAME,gBAAgB,GAAGhF,WAAW,CAAEiF,KAAK,IAAK;IAC9C,MAAMC,QAAQ,GAAGC,KAAK,CAACC,IAAI,CAACH,KAAK,CAAC;IAClC,MAAMI,UAAU,GAAG,EAAE;IACrB,MAAMC,MAAM,GAAG,EAAE;;IAEjB;IACA,MAAMC,UAAU,GAAGxC,aAAa,CAACyC,MAAM,GAAGN,QAAQ,CAACM,MAAM;IACzD,IAAID,UAAU,GAAGvD,kBAAkB,EAAE;MACnCN,KAAK,CAAC+D,KAAK,CAAC,2CAA2CzD,kBAAkB,oBAAoB,CAAC;MAC9F;IACF;IAEAkD,QAAQ,CAACQ,OAAO,CAACf,IAAI,IAAI;MACvB,IAAI;QACFD,YAAY,CAACC,IAAI,CAAC;QAClBU,UAAU,CAACM,IAAI,CAAChB,IAAI,CAAC;MACvB,CAAC,CAAC,OAAOc,KAAK,EAAE;QACdH,MAAM,CAACK,IAAI,CAAC,GAAGhB,IAAI,CAACN,IAAI,KAAKoB,KAAK,CAACG,OAAO,EAAE,CAAC;MAC/C;IACF,CAAC,CAAC;IAEF,IAAIN,MAAM,CAACE,MAAM,GAAG,CAAC,EAAE;MACrBF,MAAM,CAACI,OAAO,CAACD,KAAK,IAAI/D,KAAK,CAAC+D,KAAK,CAACA,KAAK,CAAC,CAAC;IAC7C;IAEA,IAAIJ,UAAU,CAACG,MAAM,GAAG,CAAC,EAAE;MACzBxC,gBAAgB,CAACyB,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAE,GAAGY,UAAU,CAAC,CAAC;IACpD;EACF,CAAC,EAAE,CAACtC,aAAa,CAACyC,MAAM,CAAC,CAAC;EAE1B,MAAMK,eAAe,GAAIzB,CAAC,IAAK;IAC7BY,gBAAgB,CAACZ,CAAC,CAACI,MAAM,CAACS,KAAK,CAAC;IAChCb,CAAC,CAACI,MAAM,CAACX,KAAK,GAAG,EAAE,CAAC,CAAC;EACvB,CAAC;EAED,MAAMiC,UAAU,GAAG9F,WAAW,CAAEoE,CAAC,IAAK;IACpCA,CAAC,CAAC2B,cAAc,CAAC,CAAC;IAClB3B,CAAC,CAAC4B,eAAe,CAAC,CAAC;IACnB,IAAI5B,CAAC,CAACE,IAAI,KAAK,WAAW,IAAIF,CAAC,CAACE,IAAI,KAAK,UAAU,EAAE;MACnDpB,aAAa,CAAC,IAAI,CAAC;IACrB,CAAC,MAAM,IAAIkB,CAAC,CAACE,IAAI,KAAK,WAAW,EAAE;MACjCpB,aAAa,CAAC,KAAK,CAAC;IACtB;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAM+C,UAAU,GAAGjG,WAAW,CAAEoE,CAAC,IAAK;IACpCA,CAAC,CAAC2B,cAAc,CAAC,CAAC;IAClB3B,CAAC,CAAC4B,eAAe,CAAC,CAAC;IACnB9C,aAAa,CAAC,KAAK,CAAC;IAEpB,IAAIkB,CAAC,CAAC8B,YAAY,CAACjB,KAAK,IAAIb,CAAC,CAAC8B,YAAY,CAACjB,KAAK,CAAC,CAAC,CAAC,EAAE;MACnDD,gBAAgB,CAACZ,CAAC,CAAC8B,YAAY,CAACjB,KAAK,CAAC;IACxC;EACF,CAAC,EAAE,CAACD,gBAAgB,CAAC,CAAC;EAEtB,MAAMmB,UAAU,GAAIC,KAAK,IAAK;IAC5BpD,gBAAgB,CAACyB,IAAI,IAAIA,IAAI,CAAC4B,MAAM,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKA,CAAC,KAAKH,KAAK,CAAC,CAAC;EAC9D,CAAC;EAED,MAAMI,WAAW,GAAG,MAAAA,CAAA,KAAY;IAC9B,IAAIzD,aAAa,CAACyC,MAAM,KAAK,CAAC,EAAE,OAAO,EAAE;IAEzC5C,cAAc,CAAC,IAAI,CAAC;IACpBE,iBAAiB,CAAC,CAAC,CAAC;IACpB,MAAM2D,aAAa,GAAG,EAAE;IAExB,IAAI;MACF,KAAK,IAAIF,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGxD,aAAa,CAACyC,MAAM,EAAEe,CAAC,EAAE,EAAE;QAC7C,MAAM5B,IAAI,GAAG5B,aAAa,CAACwD,CAAC,CAAC;QAC7B,MAAMlD,QAAQ,GAAG,IAAIqD,QAAQ,CAAC,CAAC;QAC/BrD,QAAQ,CAACsD,MAAM,CAAC,MAAM,EAAEhC,IAAI,CAAC;QAC7BtB,QAAQ,CAACsD,MAAM,CAAC,OAAO,EAAEhC,IAAI,CAACN,IAAI,CAAC;QAEnCuC,OAAO,CAACC,GAAG,CAAC,kBAAkBN,CAAC,GAAG,CAAC,IAAIxD,aAAa,CAACyC,MAAM,KAAKb,IAAI,CAACN,IAAI,EAAE,CAAC;QAE5E,MAAMyC,QAAQ,GAAG,MAAM3G,QAAQ,CAAC4G,WAAW,CAAC1D,QAAQ,EAAG2D,QAAQ,IAAK;UAClE,MAAMC,aAAa,GAAI,CAACV,CAAC,GAAGS,QAAQ,IAAIjE,aAAa,CAACyC,MAAM,GAAI,GAAG;UACnE1C,iBAAiB,CAACmE,aAAa,CAAC;QAClC,CAAC,CAAC;QAEFL,OAAO,CAACC,GAAG,CAAC,6BAA6B,EAAEC,QAAQ,CAAC;QACpDL,aAAa,CAACd,IAAI,CAACmB,QAAQ,CAAC;MAC9B;MAEAF,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAEJ,aAAa,CAAC;MACjD/E,KAAK,CAACwF,OAAO,CAAC,GAAGT,aAAa,CAACjB,MAAM,oCAAoC,CAAC;MAC1E,OAAOiB,aAAa;IACtB,CAAC,CAAC,OAAOhB,KAAK,EAAE;MACdmB,OAAO,CAACnB,KAAK,CAAC,gBAAgB,EAAEA,KAAK,CAAC;MACtC/D,KAAK,CAAC+D,KAAK,CAAC,uCAAuC,CAAC;MACpD,MAAMA,KAAK;IACb,CAAC,SAAS;MACR7C,cAAc,CAAC,KAAK,CAAC;MACrBE,iBAAiB,CAAC,CAAC,CAAC;IACtB;EACF,CAAC;EAED,MAAMqE,YAAY,GAAG,MAAO/C,CAAC,IAAK;IAChCA,CAAC,CAAC2B,cAAc,CAAC,CAAC;IAClB,IAAI,CAAC1C,QAAQ,CAACG,OAAO,CAAC4D,IAAI,CAAC,CAAC,IAAIrE,aAAa,CAACyC,MAAM,KAAK,CAAC,EAAE;MAC1D9D,KAAK,CAAC+D,KAAK,CAAC,2CAA2C,CAAC;MACxD;IACF;IAEA/C,YAAY,CAAC,IAAI,CAAC;IAClB,IAAI;MACF;MACA,MAAM+D,aAAa,GAAG,MAAMD,WAAW,CAAC,CAAC;;MAEzC;MACA,MAAMa,QAAQ,GAAG;QACf,GAAGhE,QAAQ;QACXiE,WAAW,EAAEb,aAAa,CAACc,GAAG,CAACC,KAAK,IAAIA,KAAK,CAACC,EAAE;MAClD,CAAC;MAEDb,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAEQ,QAAQ,CAAC;MACjDT,OAAO,CAACC,GAAG,CAAC,YAAY,EAAEJ,aAAa,CAACc,GAAG,CAACC,KAAK,IAAIA,KAAK,CAACC,EAAE,CAAC,CAAC;MAE/D,MAAMX,QAAQ,GAAG,MAAM5G,QAAQ,CAACwH,UAAU,CAACL,QAAQ,CAAC;MAEpDT,OAAO,CAACC,GAAG,CAAC,4BAA4B,EAAEC,QAAQ,CAAC;MACnDpF,KAAK,CAACwF,OAAO,CAAC,iCAAiC,CAAC;MAChD5E,aAAa,CAACwE,QAAQ,CAAC;MACvBa,WAAW,CAAC,CAAC;IACf,CAAC,CAAC,OAAOlC,KAAK,EAAE;MACdmB,OAAO,CAACnB,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;MAC7C/D,KAAK,CAAC+D,KAAK,CAAC,8CAA8C,CAAC;IAC7D,CAAC,SAAS;MACR/C,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC;EAED,MAAMiF,WAAW,GAAGA,CAAA,KAAM;IACxBrE,WAAW,CAAC;MACVC,KAAK,EAAE,EAAE;MACTC,OAAO,EAAE,EAAE;MACXC,SAAS,EAAE,MAAM;MACjBC,YAAY,EAAE,KAAK;MACnBC,OAAO,EAAE;IACX,CAAC,CAAC;IACFX,gBAAgB,CAAC,EAAE,CAAC;IACpBF,iBAAiB,CAAC,CAAC,CAAC;IACpBT,OAAO,CAAC,CAAC;EACX,CAAC;EAED,MAAMuF,iBAAiB,GAAGA,CAACjD,IAAI,EAAEyB,KAAK,KAAK;IACzC,MAAMyB,OAAO,GAAGlD,IAAI,CAACL,IAAI,CAACM,UAAU,CAAC,QAAQ,CAAC;IAC9C,MAAMkD,OAAO,GAAGnD,IAAI,CAACL,IAAI,CAACM,UAAU,CAAC,QAAQ,CAAC;IAE9C,oBACEhD,OAAA;MAAiBmG,SAAS,EAAC,gBAAgB;MAAAC,QAAA,gBACzCpG,OAAA;QAAKmG,SAAS,EAAC,iDAAiD;QAAAC,QAAA,GAC7DF,OAAO,gBACNlG,OAAA;UACEqG,GAAG,EAAEC,GAAG,CAACC,eAAe,CAACxD,IAAI,CAAE;UAC/ByD,GAAG,EAAEzD,IAAI,CAACN,IAAK;UACf0D,SAAS,EAAC;QAA0B;UAAAM,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACrC,CAAC,GACAX,OAAO,gBACTjG,OAAA;UACEqG,GAAG,EAAEC,GAAG,CAACC,eAAe,CAACxD,IAAI,CAAE;UAC/BoD,SAAS,EAAC,0BAA0B;UACpCU,QAAQ;QAAA;UAAAJ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACT,CAAC,GACA,IAAI,eAER5G,OAAA;UAAKmG,SAAS,EAAC,+HAA+H;UAAAC,QAAA,eAC5IpG,OAAA;YACE8G,OAAO,EAAEA,CAAA,KAAMvC,UAAU,CAACC,KAAK,CAAE;YACjC2B,SAAS,EAAC,uHAAuH;YAAAC,QAAA,eAEjIpG,OAAA,CAAClB,CAAC;cAACqH,SAAS,EAAC;YAAS;cAAAM,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACnB;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eAEN5G,OAAA;QAAKmG,SAAS,EAAC,4BAA4B;QAAAC,QAAA,GACxCrD,IAAI,CAACN,IAAI,EAAC,IAAE,EAAC,CAACM,IAAI,CAACI,IAAI,GAAG,IAAI,GAAG,IAAI,EAAE4D,OAAO,CAAC,CAAC,CAAC,EAAC,MACrD;MAAA;QAAAN,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC;IAAA,GA5BEpC,KAAK;MAAAiC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OA6BV,CAAC;EAEV,CAAC;EAED,IAAI,CAACpG,MAAM,EAAE,OAAO,IAAI;EAExB,oBACER,OAAA;IAAKmG,SAAS,EAAC,4EAA4E;IAAAC,QAAA,eACzFpG,OAAA;MAAKmG,SAAS,EAAC,kFAAkF;MAAAC,QAAA,gBAE/FpG,OAAA;QAAKmG,SAAS,EAAC,gDAAgD;QAAAC,QAAA,gBAC7DpG,OAAA;UAAImG,SAAS,EAAC,qCAAqC;UAAAC,QAAA,EAAC;QAAqB;UAAAK,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAC9E5G,OAAA;UACE8G,OAAO,EAAEf,WAAY;UACrBI,SAAS,EAAC,qDAAqD;UAAAC,QAAA,eAE/DpG,OAAA,CAAClB,CAAC;YAACqH,SAAS,EAAC;UAAS;YAAAM,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACnB,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC,eAEN5G,OAAA;QAAMgH,QAAQ,EAAEzB,YAAa;QAACY,SAAS,EAAC,KAAK;QAAAC,QAAA,gBAE3CpG,OAAA;UAAKmG,SAAS,EAAC,MAAM;UAAAC,QAAA,eACnBpG,OAAA;YACEyC,IAAI,EAAC,SAAS;YACdR,KAAK,EAAER,QAAQ,CAACG,OAAQ;YACxBqF,QAAQ,EAAE1E,YAAa;YACvB2E,WAAW,EAAE,iBAAiB,CAAAtG,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEuG,UAAU,KAAI,aAAa,IAAK;YACpEhB,SAAS,EAAC,oHAAoH;YAC9HiB,IAAI,EAAE;UAAE;YAAAX,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACT;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC,eAGN5G,OAAA;UACEqH,GAAG,EAAE7F,WAAY;UACjB8F,WAAW,EAAEpD,UAAW;UACxBqD,WAAW,EAAErD,UAAW;UACxBsD,UAAU,EAAEtD,UAAW;UACvBuD,MAAM,EAAEpD,UAAW;UACnB8B,SAAS,EAAE,iFACT9E,UAAU,GACN,4BAA4B,GAC5B,uCAAuC,EAC1C;UAAA+E,QAAA,gBAEHpG,OAAA;YACEqH,GAAG,EAAE9F,YAAa;YAClBmB,IAAI,EAAC,MAAM;YACXgF,QAAQ;YACRC,MAAM,EAAC,iBAAiB;YACxBV,QAAQ,EAAEhD,eAAgB;YAC1BkC,SAAS,EAAC;UAAQ;YAAAM,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACnB,CAAC,eAEF5G,OAAA;YAAKmG,SAAS,EAAC,WAAW;YAAAC,QAAA,gBACxBpG,OAAA;cAAKmG,SAAS,EAAC,+BAA+B;cAAAC,QAAA,eAC5CpG,OAAA;gBACE0C,IAAI,EAAC,QAAQ;gBACboE,OAAO,EAAEA,CAAA;kBAAA,IAAAc,qBAAA;kBAAA,QAAAA,qBAAA,GAAMrG,YAAY,CAACsG,OAAO,cAAAD,qBAAA,uBAApBA,qBAAA,CAAsBE,KAAK,CAAC,CAAC;gBAAA,CAAC;gBAC7C3B,SAAS,EAAC,6GAA6G;gBAAAC,QAAA,gBAEvHpG,OAAA,CAACjB,KAAK;kBAACoH,SAAS,EAAC;gBAAS;kBAAAM,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,eAC7B5G,OAAA;kBAAAoG,QAAA,EAAM;gBAAW;kBAAAK,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAClB;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN,CAAC,eAEN5G,OAAA;cAAGmG,SAAS,EAAC,uBAAuB;cAAAC,QAAA,EAAC;YAErC;cAAAK,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC,eACJ5G,OAAA;cAAGmG,SAAS,EAAC,uBAAuB;cAAAC,QAAA,EAAC;YAErC;cAAAK,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACD,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,EAGLzF,aAAa,CAACyC,MAAM,GAAG,CAAC,iBACvB5D,OAAA;UAAKmG,SAAS,EAAC,MAAM;UAAAC,QAAA,gBACnBpG,OAAA;YAAImG,SAAS,EAAC,wCAAwC;YAAAC,QAAA,GAAC,+BAC9B,EAACjF,aAAa,CAACyC,MAAM,EAAC,GAC/C;UAAA;YAAA6C,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACL5G,OAAA;YAAKmG,SAAS,EAAC,uCAAuC;YAAAC,QAAA,EACnDjF,aAAa,CAACwE,GAAG,CAAC,CAAC5C,IAAI,EAAEyB,KAAK,KAAKwB,iBAAiB,CAACjD,IAAI,EAAEyB,KAAK,CAAC;UAAC;YAAAiC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAChE,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CACN,EAGA7F,WAAW,iBACVf,OAAA;UAAKmG,SAAS,EAAC,MAAM;UAAAC,QAAA,gBACnBpG,OAAA;YAAKmG,SAAS,EAAC,8DAA8D;YAAAC,QAAA,gBAC3EpG,OAAA;cAAAoG,QAAA,EAAM;YAAkB;cAAAK,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eAC/B5G,OAAA;cAAAoG,QAAA,GAAO2B,IAAI,CAACC,KAAK,CAAC/G,cAAc,CAAC,EAAC,GAAC;YAAA;cAAAwF,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACvC,CAAC,eACN5G,OAAA;YAAKmG,SAAS,EAAC,qCAAqC;YAAAC,QAAA,eAClDpG,OAAA;cACEmG,SAAS,EAAC,0DAA0D;cACpE8B,KAAK,EAAE;gBAAEC,KAAK,EAAE,GAAGjH,cAAc;cAAI;YAAE;cAAAwF,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACxC;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CACN,eAGD5G,OAAA;UAAKmG,SAAS,EAAC,gBAAgB;UAAAC,QAAA,gBAE/BpG,OAAA;YAAAoG,QAAA,gBACIpG,OAAA;cAAOmG,SAAS,EAAC,8CAA8C;cAAAC,QAAA,EAAC;YAEhE;cAAAK,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eACR5G,OAAA;cAAKmG,SAAS,EAAC,uCAAuC;cAAAC,QAAA,EACrDpE,SAAS,CAAC2D,GAAG,CAAEjD,IAAI,IAAK;gBACvB,MAAMyF,IAAI,GAAGzF,IAAI,CAACP,IAAI;gBACtB,oBACEnC,OAAA;kBAEE0C,IAAI,EAAC,QAAQ;kBACboE,OAAO,EAAEA,CAAA,KAAMpF,WAAW,CAACmB,IAAI,KAAK;oBAAE,GAAGA,IAAI;oBAAEhB,SAAS,EAAEa,IAAI,CAACT;kBAAM,CAAC,CAAC,CAAE;kBACvEkE,SAAS,EAAE,uEACT1E,QAAQ,CAACI,SAAS,KAAKa,IAAI,CAACT,KAAK,GAC7B,0CAA0C,GAC1C,uCAAuC,EAC1C;kBAAAmE,QAAA,gBAEHpG,OAAA,CAACmI,IAAI;oBAAChC,SAAS,EAAE,WAAWzD,IAAI,CAACN,KAAK;kBAAG;oBAAAqE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE,CAAC,eAC5C5G,OAAA;oBAAMmG,SAAS,EAAC,SAAS;oBAAAC,QAAA,EAAE1D,IAAI,CAACR;kBAAK;oBAAAuE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC;gBAAA,GAV1ClE,IAAI,CAACT,KAAK;kBAAAwE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAWT,CAAC;cAEb,CAAC;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACC,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,eAGN5G,OAAA;YAAAoG,QAAA,gBACIpG,OAAA;cAAOmG,SAAS,EAAC,8CAA8C;cAAAC,QAAA,EAAC;YAE5D;cAAAK,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eACZ5G,OAAA;cAAKmG,SAAS,EAAC,WAAW;cAAAC,QAAA,EACvB/D,cAAc,CAACsD,GAAG,CAAEyC,MAAM,IAAK;gBAC9B,MAAMD,IAAI,GAAGC,MAAM,CAACjG,IAAI;gBACxB,oBACEnC,OAAA;kBAEE0C,IAAI,EAAC,QAAQ;kBACboE,OAAO,EAAEA,CAAA,KAAMpF,WAAW,CAACmB,IAAI,KAAK;oBAAE,GAAGA,IAAI;oBAAEd,OAAO,EAAEqG,MAAM,CAACnG;kBAAM,CAAC,CAAC,CAAE;kBACzEkE,SAAS,EAAE,8EACT1E,QAAQ,CAACM,OAAO,KAAKqG,MAAM,CAACnG,KAAK,GAC7B,4BAA4B,GAC5B,uCAAuC,EAC1C;kBAAAmE,QAAA,gBAEHpG,OAAA,CAACmI,IAAI;oBAAChC,SAAS,EAAC;kBAAuB;oBAAAM,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE,CAAC,eAC1C5G,OAAA;oBAAKmG,SAAS,EAAC,WAAW;oBAAAC,QAAA,gBACxBpG,OAAA;sBAAKmG,SAAS,EAAC,qBAAqB;sBAAAC,QAAA,EAAEgC,MAAM,CAAClG;oBAAK;sBAAAuE,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAM,CAAC,eACzD5G,OAAA;sBAAKmG,SAAS,EAAC,uBAAuB;sBAAAC,QAAA,EAAEgC,MAAM,CAAC9F;oBAAW;sBAAAmE,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAM,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACtE,CAAC;gBAAA,GAbOwB,MAAM,CAACnG,KAAK;kBAAAwE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAcf,CAAC;cAET,CAAC;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACC,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACD,CAAC,eAGV5G,OAAA;YAAKmG,SAAS,EAAC,6BAA6B;YAAAC,QAAA,eAC1CpG,OAAA;cAAOmG,SAAS,EAAC,6BAA6B;cAAAC,QAAA,gBAC1CpG,OAAA;gBACE0C,IAAI,EAAC,UAAU;gBACfD,IAAI,EAAC,cAAc;gBACnBE,OAAO,EAAElB,QAAQ,CAACK,YAAa;gBAC/BmF,QAAQ,EAAE1E,YAAa;gBACvB4D,SAAS,EAAC;cAA2D;gBAAAM,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACtE,CAAC,eACF5G,OAAA;gBAAMmG,SAAS,EAAC,uBAAuB;gBAAAC,QAAA,EAAC;cAAmB;gBAAAK,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC/D;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eAGN5G,OAAA;UAAKmG,SAAS,EAAC,+CAA+C;UAAAC,QAAA,gBAC5DpG,OAAA;YACE0C,IAAI,EAAC,QAAQ;YACboE,OAAO,EAAEf,WAAY;YACrBI,SAAS,EAAC,oFAAoF;YAAAC,QAAA,EAC/F;UAED;YAAAK,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eACT5G,OAAA;YACE0C,IAAI,EAAC,QAAQ;YACb2F,QAAQ,EAAExH,SAAS,IAAIE,WAAY;YACnCoF,SAAS,EAAC,iIAAiI;YAAAC,QAAA,EAE1IvF,SAAS,GAAG,gBAAgB,GAAG;UAAS;YAAA4F,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACnC,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACJ;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;AAACjG,EAAA,CAvbIJ,UAAU;EAAA,QACGlC,OAAO;AAAA;AAAAiK,EAAA,GADpB/H,UAAU;AAybhB,eAAeA,UAAU;AAAC,IAAA+H,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DELL\\\\Documents\\\\mesProjets\\\\CommuniConnect\\\\frontend\\\\src\\\\components\\\\LiveStream.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { mediaAPI } from '../services/mediaAPI';\nimport { Video, VideoOff, Mic, MicOff, Camera, CameraOff, Play, Square, Settings, Users, MessageCircle, Send, X, Volume2, VolumeX, Share, MoreVertical, Sliders, Monitor, Wifi, Activity } from 'lucide-react';\nimport toast from 'react-hot-toast';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst LiveStream = ({\n  isOpen,\n  onClose,\n  onLiveStarted\n}) => {\n  _s();\n  const {\n    user\n  } = useAuth();\n  const [isStarting, setIsStarting] = useState(false);\n  const [isLive, setIsLive] = useState(false);\n  const [stream, setStream] = useState(null);\n  const [liveData, setLiveData] = useState(null);\n  const [showChat, setShowChat] = useState(true);\n  const [isMuted, setIsMuted] = useState(false);\n  const [isVideoEnabled, setIsVideoEnabled] = useState(true);\n  const [viewersCount, setViewersCount] = useState(0);\n  const [chatMessages, setChatMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n\n  // Nouveaux états pour les contrôles de niveau live\n  const [streamVolume, setStreamVolume] = useState(100);\n  const [videoQuality, setVideoQuality] = useState('720p');\n  const [showAdvancedControls, setShowAdvancedControls] = useState(false);\n  const [streamLatency, setStreamLatency] = useState('low');\n  const [bitrate, setBitrate] = useState(2500);\n  const [fps, setFps] = useState(30);\n  const videoRef = useRef(null);\n  const mediaRecorderRef = useRef(null);\n  const streamRef = useRef(null);\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    content: ''\n  });\n  useEffect(() => {\n    if (isOpen && !stream) {\n      startCamera();\n    }\n    return () => {\n      stopCamera();\n    };\n  }, [isOpen]);\n  const startCamera = async () => {\n    try {\n      const mediaStream = await navigator.mediaDevices.getUserMedia({\n        video: true,\n        audio: true\n      });\n      setStream(mediaStream);\n      streamRef.current = mediaStream;\n      if (videoRef.current) {\n        videoRef.current.srcObject = mediaStream;\n      }\n    } catch (error) {\n      console.error('Erreur accès caméra:', error);\n      toast.error('Impossible d\\'accéder à la caméra/microphone');\n    }\n  };\n  const stopCamera = () => {\n    if (streamRef.current) {\n      streamRef.current.getTracks().forEach(track => track.stop());\n      setStream(null);\n      streamRef.current = null;\n    }\n  };\n  const toggleMute = () => {\n    if (stream) {\n      const audioTrack = stream.getAudioTracks()[0];\n      if (audioTrack) {\n        audioTrack.enabled = !audioTrack.enabled;\n        setIsMuted(!isMuted);\n      }\n    }\n  };\n  const toggleVideo = () => {\n    if (stream) {\n      const videoTrack = stream.getVideoTracks()[0];\n      if (videoTrack) {\n        videoTrack.enabled = !videoTrack.enabled;\n        setIsVideoEnabled(!isVideoEnabled);\n      }\n    }\n  };\n  const startLive = async () => {\n    if (!formData.title.trim()) {\n      toast.error('Veuillez ajouter un titre pour votre live');\n      return;\n    }\n    setIsStarting(true);\n    try {\n      const response = await mediaAPI.startLive(formData);\n      setLiveData(response);\n      setIsLive(true);\n\n      // Simuler le streaming RTMP (dans un vrai projet, vous utiliseriez WebRTC ou RTMP)\n      toast.success('Live démarré avec succès !');\n      onLiveStarted === null || onLiveStarted === void 0 ? void 0 : onLiveStarted(response);\n    } catch (error) {\n      console.error('Erreur démarrage live:', error);\n      toast.error('Erreur lors du démarrage du live');\n    } finally {\n      setIsStarting(false);\n    }\n  };\n  const stopLive = async () => {\n    if (!liveData) return;\n    try {\n      await mediaAPI.stopLive(liveData.live_id);\n      setIsLive(false);\n      setLiveData(null);\n      toast.success('Live arrêté');\n      onClose();\n    } catch (error) {\n      console.error('Erreur arrêt live:', error);\n      toast.error('Erreur lors de l\\'arrêt du live');\n    }\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    startLive();\n  };\n  const sendChatMessage = () => {\n    if (!newMessage.trim()) return;\n    const message = {\n      id: Date.now(),\n      author: user,\n      content: newMessage,\n      timestamp: new Date().toISOString()\n    };\n    setChatMessages(prev => [...prev, message]);\n    setNewMessage('');\n  };\n\n  // Nouvelles fonctions pour les contrôles de niveau live\n  const handleVolumeChange = newVolume => {\n    setStreamVolume(newVolume);\n    if (stream) {\n      const audioTrack = stream.getAudioTracks()[0];\n      if (audioTrack) {\n        // Ajuster le volume du stream audio\n        const audioContext = new (window.AudioContext || window.webkitAudioContext)();\n        const source = audioContext.createMediaStreamSource(stream);\n        const gainNode = audioContext.createGain();\n        gainNode.gain.value = newVolume / 100;\n        source.connect(gainNode);\n      }\n    }\n  };\n  const handleQualityChange = quality => {\n    setVideoQuality(quality);\n    // Dans un vrai projet, vous ajusteriez la qualité du stream ici\n    toast.success(`Qualité vidéo changée vers ${quality}`);\n  };\n  const handleLatencyChange = latency => {\n    setStreamLatency(latency);\n    // Dans un vrai projet, vous ajusteriez la latence du stream ici\n    toast.success(`Latence changée vers ${latency}`);\n  };\n  const handleBitrateChange = newBitrate => {\n    setBitrate(newBitrate);\n    // Dans un vrai projet, vous ajusteriez le bitrate du stream ici\n    toast.success(`Bitrate changé vers ${newBitrate} kbps`);\n  };\n  const handleFpsChange = newFps => {\n    setFps(newFps);\n    // Dans un vrai projet, vous ajusteriez le FPS du stream ici\n    toast.success(`FPS changé vers ${newFps}`);\n  };\n  if (!isOpen) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg shadow-xl w-full max-w-6xl mx-4 max-h-[90vh] overflow-hidden\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between p-4 border-b\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold text-gray-900\",\n          children: isLive ? 'Live en cours' : 'Démarrer un live'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"text-gray-400 hover:text-gray-600 transition-colors\",\n          children: /*#__PURE__*/_jsxDEV(X, {\n            className: \"w-6 h-6\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex h-[calc(90vh-120px)]\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 flex flex-col\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1 bg-black relative\",\n            children: [/*#__PURE__*/_jsxDEV(\"video\", {\n              ref: videoRef,\n              autoPlay: true,\n              muted: true,\n              playsInline: true,\n              className: \"w-full h-full object-cover\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 15\n            }, this), isLive && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute top-4 left-4 bg-red-600 text-white px-3 py-1 rounded-full text-sm font-medium flex items-center space-x-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-2 h-2 bg-white rounded-full animate-pulse\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 249,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"EN DIRECT\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 250,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 17\n            }, this), isLive && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute top-4 right-4 bg-black bg-opacity-50 text-white px-3 py-1 rounded-full text-sm\",\n              children: [viewersCount, \" spectateurs\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute bottom-4 left-4 right-4 flex items-center justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: toggleMute,\n                  className: `p-3 rounded-full transition-colors ${isMuted ? 'bg-red-500 text-white' : 'bg-black bg-opacity-50 text-white hover:bg-opacity-70'}`,\n                  children: isMuted ? /*#__PURE__*/_jsxDEV(MicOff, {\n                    className: \"w-5 h-5\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 270,\n                    columnNumber: 32\n                  }, this) : /*#__PURE__*/_jsxDEV(Mic, {\n                    className: \"w-5 h-5\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 270,\n                    columnNumber: 65\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 264,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: toggleVideo,\n                  className: `p-3 rounded-full transition-colors ${!isVideoEnabled ? 'bg-red-500 text-white' : 'bg-black bg-opacity-50 text-white hover:bg-opacity-70'}`,\n                  children: isVideoEnabled ? /*#__PURE__*/_jsxDEV(Camera, {\n                    className: \"w-5 h-5\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 279,\n                    columnNumber: 39\n                  }, this) : /*#__PURE__*/_jsxDEV(CameraOff, {\n                    className: \"w-5 h-5\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 279,\n                    columnNumber: 72\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 273,\n                  columnNumber: 19\n                }, this), isLive && /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center space-x-2 bg-black bg-opacity-50 rounded-lg px-3 py-2\",\n                    children: [/*#__PURE__*/_jsxDEV(Volume2, {\n                      className: \"w-4 h-4 text-white\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 287,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"range\",\n                      min: \"0\",\n                      max: \"100\",\n                      value: streamVolume,\n                      onChange: e => handleVolumeChange(parseInt(e.target.value)),\n                      className: \"w-20 h-2 bg-gray-600 rounded-lg appearance-none cursor-pointer slider\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 288,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-white text-xs\",\n                      children: [streamVolume, \"%\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 296,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 286,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center space-x-2 bg-black bg-opacity-50 rounded-lg px-3 py-2 quality-indicator\",\n                    children: [/*#__PURE__*/_jsxDEV(Monitor, {\n                      className: \"w-4 h-4 text-white\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 301,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                      value: videoQuality,\n                      onChange: e => handleQualityChange(e.target.value),\n                      className: \"bg-transparent text-white text-xs border-none outline-none\",\n                      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"480p\",\n                        children: \"480p\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 307,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"720p\",\n                        children: \"720p\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 308,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"1080p\",\n                        children: \"1080p\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 309,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 302,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 300,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => setShowAdvancedControls(!showAdvancedControls),\n                    className: \"p-3 rounded-full transition-colors bg-black bg-opacity-50 text-white hover:bg-opacity-70\",\n                    children: /*#__PURE__*/_jsxDEV(Sliders, {\n                      className: \"w-5 h-5\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 318,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 314,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 17\n              }, this), isLive && /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: stopLive,\n                className: \"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors flex items-center space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(Square, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 329,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Arr\\xEAter le live\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 330,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 325,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 15\n            }, this), isLive && showAdvancedControls && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute bottom-20 left-4 bg-black bg-opacity-90 text-white rounded-lg p-4 space-y-4 min-w-80 live-controls-panel\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: \"font-medium\",\n                  children: \"Param\\xE8tres avanc\\xE9s\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 339,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => setShowAdvancedControls(false),\n                  className: \"text-gray-400 hover:text-white\",\n                  children: /*#__PURE__*/_jsxDEV(X, {\n                    className: \"w-4 h-4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 344,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 340,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 338,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-xs text-gray-300 mb-1\",\n                    children: \"Latence\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 351,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    value: streamLatency,\n                    onChange: e => handleLatencyChange(e.target.value),\n                    className: \"w-full bg-gray-800 text-white text-sm rounded px-2 py-1\",\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"ultra-low\",\n                      children: \"Ultra-faible\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 357,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"low\",\n                      children: \"Faible\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 358,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"medium\",\n                      children: \"Moyenne\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 359,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"high\",\n                      children: \"\\xC9lev\\xE9e\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 360,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 352,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 350,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-xs text-gray-300 mb-1\",\n                    children: \"Bitrate (kbps)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 366,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"range\",\n                    min: \"1000\",\n                    max: \"6000\",\n                    step: \"500\",\n                    value: bitrate,\n                    onChange: e => handleBitrateChange(parseInt(e.target.value)),\n                    className: \"w-full h-2 bg-gray-600 rounded-lg appearance-none cursor-pointer slider\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 367,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex justify-between text-xs text-gray-300\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      children: \"1000\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 377,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: bitrate\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 378,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: \"6000\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 379,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 376,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 365,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-xs text-gray-300 mb-1\",\n                    children: \"FPS\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 385,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    value: fps,\n                    onChange: e => handleFpsChange(parseInt(e.target.value)),\n                    className: \"w-full bg-gray-800 text-white text-sm rounded px-2 py-1\",\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: 24,\n                      children: \"24 FPS\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 391,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: 30,\n                      children: \"30 FPS\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 392,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: 60,\n                      children: \"60 FPS\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 393,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 386,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 384,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"pt-2 border-t border-gray-700\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center space-x-2 text-xs\",\n                    children: [/*#__PURE__*/_jsxDEV(Wifi, {\n                      className: \"w-3 h-3\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 400,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: \"Connexion stable\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 401,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 399,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center space-x-2 text-xs mt-1\",\n                    children: [/*#__PURE__*/_jsxDEV(Activity, {\n                      className: \"w-3 h-3\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 404,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: [\"Latence: \", streamLatency === 'ultra-low' ? '< 1s' : streamLatency === 'low' ? '1-2s' : '2-3s']\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 405,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 403,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 398,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 348,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 13\n          }, this), !isLive && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4 border-t\",\n            children: /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: handleSubmit,\n              className: \"space-y-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-sm font-medium text-gray-700 mb-2\",\n                  children: \"Titre du live *\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 418,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  name: \"title\",\n                  value: formData.title,\n                  onChange: e => setFormData(prev => ({\n                    ...prev,\n                    title: e.target.value\n                  })),\n                  placeholder: \"Titre de votre live...\",\n                  className: \"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\",\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 421,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 417,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-sm font-medium text-gray-700 mb-2\",\n                  children: \"Description (optionnel)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 433,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  name: \"description\",\n                  value: formData.description,\n                  onChange: e => setFormData(prev => ({\n                    ...prev,\n                    description: e.target.value\n                  })),\n                  placeholder: \"Description de votre live...\",\n                  rows: 2,\n                  className: \"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 436,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 432,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-sm font-medium text-gray-700 mb-2\",\n                  children: \"Message de publication\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 447,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  name: \"content\",\n                  value: formData.content,\n                  onChange: e => setFormData(prev => ({\n                    ...prev,\n                    content: e.target.value\n                  })),\n                  placeholder: \"Message accompagnant votre live...\",\n                  rows: 2,\n                  className: \"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 450,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 446,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-end space-x-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  onClick: onClose,\n                  className: \"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors\",\n                  children: \"Annuler\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 461,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"submit\",\n                  disabled: isStarting,\n                  className: \"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2\",\n                  children: isStarting ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 475,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: \"D\\xE9marrage...\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 476,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(Play, {\n                      className: \"w-4 h-4\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 480,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: \"D\\xE9marrer le live\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 481,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 468,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 460,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 416,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 415,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 11\n        }, this), isLive && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-80 border-l border-gray-200 flex flex-col\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4 border-b\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"font-medium text-gray-900\",\n                children: \"Chat en direct\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 496,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setShowChat(!showChat),\n                className: \"text-gray-400 hover:text-gray-600 transition-colors\",\n                children: /*#__PURE__*/_jsxDEV(MessageCircle, {\n                  className: \"w-5 h-5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 501,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 497,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 495,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 494,\n            columnNumber: 15\n          }, this), showChat && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-1 p-4 overflow-y-auto space-y-3\",\n              children: chatMessages.map(message => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: message.author.profile_picture || '/default-avatar.png',\n                  alt: message.author.first_name,\n                  className: \"w-6 h-6 rounded-full object-cover flex-shrink-0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 511,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex-1\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"bg-gray-50 rounded-lg px-3 py-2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex items-center space-x-2\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-sm font-medium text-gray-900\",\n                        children: [message.author.first_name, \" \", message.author.last_name]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 519,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-xs text-gray-500\",\n                        children: new Date(message.timestamp).toLocaleTimeString('fr-FR', {\n                          hour: '2-digit',\n                          minute: '2-digit'\n                        })\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 522,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 518,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-sm text-gray-700 mt-1\",\n                      children: message.content\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 529,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 517,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 516,\n                  columnNumber: 25\n                }, this)]\n              }, message.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 510,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 508,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-4 border-t\",\n              children: /*#__PURE__*/_jsxDEV(\"form\", {\n                onSubmit: e => {\n                  e.preventDefault();\n                  sendChatMessage();\n                },\n                className: \"flex space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: newMessage,\n                  onChange: e => setNewMessage(e.target.value),\n                  placeholder: \"Tapez votre message...\",\n                  className: \"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 538,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"submit\",\n                  disabled: !newMessage.trim(),\n                  className: \"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\",\n                  children: /*#__PURE__*/_jsxDEV(Send, {\n                    className: \"w-4 h-4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 550,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 545,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 537,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 536,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 493,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 218,\n    columnNumber: 5\n  }, this);\n};\n_s(LiveStream, \"nJIipyXnx90LEOY8AxStDokqXbE=\", false, function () {\n  return [useAuth];\n});\n_c = LiveStream;\nexport default LiveStream;\nvar _c;\n$RefreshReg$(_c, \"LiveStream\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useAuth","mediaAPI","Video","VideoOff","Mic","MicOff","Camera","CameraOff","Play","Square","Settings","Users","MessageCircle","Send","X","Volume2","VolumeX","Share","MoreVertical","Sliders","Monitor","Wifi","Activity","toast","jsxDEV","_jsxDEV","Fragment","_Fragment","LiveStream","isOpen","onClose","onLiveStarted","_s","user","isStarting","setIsStarting","isLive","setIsLive","stream","setStream","liveData","setLiveData","showChat","setShowChat","isMuted","setIsMuted","isVideoEnabled","setIsVideoEnabled","viewersCount","setViewersCount","chatMessages","setChatMessages","newMessage","setNewMessage","streamVolume","setStreamVolume","videoQuality","setVideoQuality","showAdvancedControls","setShowAdvancedControls","streamLatency","setStreamLatency","bitrate","setBitrate","fps","setFps","videoRef","mediaRecorderRef","streamRef","formData","setFormData","title","description","content","startCamera","stopCamera","mediaStream","navigator","mediaDevices","getUserMedia","video","audio","current","srcObject","error","console","getTracks","forEach","track","stop","toggleMute","audioTrack","getAudioTracks","enabled","toggleVideo","videoTrack","getVideoTracks","startLive","trim","response","success","stopLive","live_id","handleSubmit","e","preventDefault","sendChatMessage","message","id","Date","now","author","timestamp","toISOString","prev","handleVolumeChange","newVolume","audioContext","window","AudioContext","webkitAudioContext","source","createMediaStreamSource","gainNode","createGain","gain","value","connect","handleQualityChange","quality","handleLatencyChange","latency","handleBitrateChange","newBitrate","handleFpsChange","newFps","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","ref","autoPlay","muted","playsInline","type","min","max","onChange","parseInt","target","step","onSubmit","name","placeholder","required","rows","disabled","map","src","profile_picture","alt","first_name","last_name","toLocaleTimeString","hour","minute","_c","$RefreshReg$"],"sources":["C:/Users/DELL/Documents/mesProjets/CommuniConnect/frontend/src/components/LiveStream.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { mediaAPI } from '../services/mediaAPI';\r\nimport { \r\n  Video, \r\n  VideoOff, \r\n  Mic, \r\n  MicOff, \r\n  Camera, \r\n  CameraOff,\r\n  Play,\r\n  Square,\r\n  Settings,\r\n  Users,\r\n  MessageCircle,\r\n  Send,\r\n  X,\r\n  Volume2,\r\n  VolumeX,\r\n  Share,\r\n  MoreVertical,\r\n  Sliders,\r\n  Monitor,\r\n  Wifi,\r\n  Activity\r\n} from 'lucide-react';\r\nimport toast from 'react-hot-toast';\r\n\r\nconst LiveStream = ({ isOpen, onClose, onLiveStarted }) => {\r\n  const { user } = useAuth();\r\n  const [isStarting, setIsStarting] = useState(false);\r\n  const [isLive, setIsLive] = useState(false);\r\n  const [stream, setStream] = useState(null);\r\n  const [liveData, setLiveData] = useState(null);\r\n  const [showChat, setShowChat] = useState(true);\r\n  const [isMuted, setIsMuted] = useState(false);\r\n  const [isVideoEnabled, setIsVideoEnabled] = useState(true);\r\n  const [viewersCount, setViewersCount] = useState(0);\r\n  const [chatMessages, setChatMessages] = useState([]);\r\n  const [newMessage, setNewMessage] = useState('');\r\n  \r\n  // Nouveaux états pour les contrôles de niveau live\r\n  const [streamVolume, setStreamVolume] = useState(100);\r\n  const [videoQuality, setVideoQuality] = useState('720p');\r\n  const [showAdvancedControls, setShowAdvancedControls] = useState(false);\r\n  const [streamLatency, setStreamLatency] = useState('low');\r\n  const [bitrate, setBitrate] = useState(2500);\r\n  const [fps, setFps] = useState(30);\r\n  \r\n  const videoRef = useRef(null);\r\n  const mediaRecorderRef = useRef(null);\r\n  const streamRef = useRef(null);\r\n\r\n  const [formData, setFormData] = useState({\r\n    title: '',\r\n    description: '',\r\n    content: ''\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (isOpen && !stream) {\r\n      startCamera();\r\n    }\r\n    \r\n    return () => {\r\n      stopCamera();\r\n    };\r\n  }, [isOpen]);\r\n\r\n  const startCamera = async () => {\r\n    try {\r\n      const mediaStream = await navigator.mediaDevices.getUserMedia({\r\n        video: true,\r\n        audio: true\r\n      });\r\n      \r\n      setStream(mediaStream);\r\n      streamRef.current = mediaStream;\r\n      \r\n      if (videoRef.current) {\r\n        videoRef.current.srcObject = mediaStream;\r\n      }\r\n    } catch (error) {\r\n      console.error('Erreur accès caméra:', error);\r\n      toast.error('Impossible d\\'accéder à la caméra/microphone');\r\n    }\r\n  };\r\n\r\n  const stopCamera = () => {\r\n    if (streamRef.current) {\r\n      streamRef.current.getTracks().forEach(track => track.stop());\r\n      setStream(null);\r\n      streamRef.current = null;\r\n    }\r\n  };\r\n\r\n  const toggleMute = () => {\r\n    if (stream) {\r\n      const audioTrack = stream.getAudioTracks()[0];\r\n      if (audioTrack) {\r\n        audioTrack.enabled = !audioTrack.enabled;\r\n        setIsMuted(!isMuted);\r\n      }\r\n    }\r\n  };\r\n\r\n  const toggleVideo = () => {\r\n    if (stream) {\r\n      const videoTrack = stream.getVideoTracks()[0];\r\n      if (videoTrack) {\r\n        videoTrack.enabled = !videoTrack.enabled;\r\n        setIsVideoEnabled(!isVideoEnabled);\r\n      }\r\n    }\r\n  };\r\n\r\n  const startLive = async () => {\r\n    if (!formData.title.trim()) {\r\n      toast.error('Veuillez ajouter un titre pour votre live');\r\n      return;\r\n    }\r\n\r\n    setIsStarting(true);\r\n    try {\r\n      const response = await mediaAPI.startLive(formData);\r\n      setLiveData(response);\r\n      setIsLive(true);\r\n      \r\n      // Simuler le streaming RTMP (dans un vrai projet, vous utiliseriez WebRTC ou RTMP)\r\n      toast.success('Live démarré avec succès !');\r\n      onLiveStarted?.(response);\r\n      \r\n    } catch (error) {\r\n      console.error('Erreur démarrage live:', error);\r\n      toast.error('Erreur lors du démarrage du live');\r\n    } finally {\r\n      setIsStarting(false);\r\n    }\r\n  };\r\n\r\n  const stopLive = async () => {\r\n    if (!liveData) return;\r\n\r\n    try {\r\n      await mediaAPI.stopLive(liveData.live_id);\r\n      setIsLive(false);\r\n      setLiveData(null);\r\n      toast.success('Live arrêté');\r\n      onClose();\r\n    } catch (error) {\r\n      console.error('Erreur arrêt live:', error);\r\n      toast.error('Erreur lors de l\\'arrêt du live');\r\n    }\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    startLive();\r\n  };\r\n\r\n  const sendChatMessage = () => {\r\n    if (!newMessage.trim()) return;\r\n    \r\n    const message = {\r\n      id: Date.now(),\r\n      author: user,\r\n      content: newMessage,\r\n      timestamp: new Date().toISOString()\r\n    };\r\n    \r\n    setChatMessages(prev => [...prev, message]);\r\n    setNewMessage('');\r\n  };\r\n\r\n  // Nouvelles fonctions pour les contrôles de niveau live\r\n  const handleVolumeChange = (newVolume) => {\r\n    setStreamVolume(newVolume);\r\n    if (stream) {\r\n      const audioTrack = stream.getAudioTracks()[0];\r\n      if (audioTrack) {\r\n        // Ajuster le volume du stream audio\r\n        const audioContext = new (window.AudioContext || window.webkitAudioContext)();\r\n        const source = audioContext.createMediaStreamSource(stream);\r\n        const gainNode = audioContext.createGain();\r\n        gainNode.gain.value = newVolume / 100;\r\n        source.connect(gainNode);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleQualityChange = (quality) => {\r\n    setVideoQuality(quality);\r\n    // Dans un vrai projet, vous ajusteriez la qualité du stream ici\r\n    toast.success(`Qualité vidéo changée vers ${quality}`);\r\n  };\r\n\r\n  const handleLatencyChange = (latency) => {\r\n    setStreamLatency(latency);\r\n    // Dans un vrai projet, vous ajusteriez la latence du stream ici\r\n    toast.success(`Latence changée vers ${latency}`);\r\n  };\r\n\r\n  const handleBitrateChange = (newBitrate) => {\r\n    setBitrate(newBitrate);\r\n    // Dans un vrai projet, vous ajusteriez le bitrate du stream ici\r\n    toast.success(`Bitrate changé vers ${newBitrate} kbps`);\r\n  };\r\n\r\n  const handleFpsChange = (newFps) => {\r\n    setFps(newFps);\r\n    // Dans un vrai projet, vous ajusteriez le FPS du stream ici\r\n    toast.success(`FPS changé vers ${newFps}`);\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50\">\r\n      <div className=\"bg-white rounded-lg shadow-xl w-full max-w-6xl mx-4 max-h-[90vh] overflow-hidden\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-4 border-b\">\r\n          <h3 className=\"text-lg font-semibold text-gray-900\">\r\n            {isLive ? 'Live en cours' : 'Démarrer un live'}\r\n          </h3>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"text-gray-400 hover:text-gray-600 transition-colors\"\r\n          >\r\n            <X className=\"w-6 h-6\" />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"flex h-[calc(90vh-120px)]\">\r\n          {/* Zone principale */}\r\n          <div className=\"flex-1 flex flex-col\">\r\n            {/* Prévisualisation vidéo */}\r\n            <div className=\"flex-1 bg-black relative\">\r\n              <video\r\n                ref={videoRef}\r\n                autoPlay\r\n                muted\r\n                playsInline\r\n                className=\"w-full h-full object-cover\"\r\n              />\r\n              \r\n              {/* Badge Live */}\r\n              {isLive && (\r\n                <div className=\"absolute top-4 left-4 bg-red-600 text-white px-3 py-1 rounded-full text-sm font-medium flex items-center space-x-1\">\r\n                  <div className=\"w-2 h-2 bg-white rounded-full animate-pulse\"></div>\r\n                  <span>EN DIRECT</span>\r\n                </div>\r\n              )}\r\n              \r\n              {/* Spectateurs */}\r\n              {isLive && (\r\n                <div className=\"absolute top-4 right-4 bg-black bg-opacity-50 text-white px-3 py-1 rounded-full text-sm\">\r\n                  {viewersCount} spectateurs\r\n                </div>\r\n              )}\r\n              \r\n              {/* Contrôles */}\r\n              <div className=\"absolute bottom-4 left-4 right-4 flex items-center justify-between\">\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <button\r\n                    onClick={toggleMute}\r\n                    className={`p-3 rounded-full transition-colors ${\r\n                      isMuted ? 'bg-red-500 text-white' : 'bg-black bg-opacity-50 text-white hover:bg-opacity-70'\r\n                    }`}\r\n                  >\r\n                    {isMuted ? <MicOff className=\"w-5 h-5\" /> : <Mic className=\"w-5 h-5\" />}\r\n                  </button>\r\n                  \r\n                  <button\r\n                    onClick={toggleVideo}\r\n                    className={`p-3 rounded-full transition-colors ${\r\n                      !isVideoEnabled ? 'bg-red-500 text-white' : 'bg-black bg-opacity-50 text-white hover:bg-opacity-70'\r\n                    }`}\r\n                  >\r\n                    {isVideoEnabled ? <Camera className=\"w-5 h-5\" /> : <CameraOff className=\"w-5 h-5\" />}\r\n                  </button>\r\n\r\n                  {/* Contrôles de niveau live */}\r\n                  {isLive && (\r\n                    <>\r\n                      {/* Contrôle du volume */}\r\n                      <div className=\"flex items-center space-x-2 bg-black bg-opacity-50 rounded-lg px-3 py-2\">\r\n                        <Volume2 className=\"w-4 h-4 text-white\" />\r\n                        <input\r\n                          type=\"range\"\r\n                          min=\"0\"\r\n                          max=\"100\"\r\n                          value={streamVolume}\r\n                          onChange={(e) => handleVolumeChange(parseInt(e.target.value))}\r\n                          className=\"w-20 h-2 bg-gray-600 rounded-lg appearance-none cursor-pointer slider\"\r\n                        />\r\n                        <span className=\"text-white text-xs\">{streamVolume}%</span>\r\n                      </div>\r\n\r\n                      {/* Contrôle de la qualité */}\r\n                      <div className=\"flex items-center space-x-2 bg-black bg-opacity-50 rounded-lg px-3 py-2 quality-indicator\">\r\n                        <Monitor className=\"w-4 h-4 text-white\" />\r\n                        <select\r\n                          value={videoQuality}\r\n                          onChange={(e) => handleQualityChange(e.target.value)}\r\n                          className=\"bg-transparent text-white text-xs border-none outline-none\"\r\n                        >\r\n                          <option value=\"480p\">480p</option>\r\n                          <option value=\"720p\">720p</option>\r\n                          <option value=\"1080p\">1080p</option>\r\n                        </select>\r\n                      </div>\r\n\r\n                      {/* Bouton paramètres avancés */}\r\n                      <button\r\n                        onClick={() => setShowAdvancedControls(!showAdvancedControls)}\r\n                        className=\"p-3 rounded-full transition-colors bg-black bg-opacity-50 text-white hover:bg-opacity-70\"\r\n                      >\r\n                        <Sliders className=\"w-5 h-5\" />\r\n                      </button>\r\n                    </>\r\n                  )}\r\n                </div>\r\n                \r\n                {isLive && (\r\n                  <button\r\n                    onClick={stopLive}\r\n                    className=\"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors flex items-center space-x-2\"\r\n                  >\r\n                    <Square className=\"w-4 h-4\" />\r\n                    <span>Arrêter le live</span>\r\n                  </button>\r\n                )}\r\n              </div>\r\n\r\n              {/* Panneau de contrôles avancés */}\r\n              {isLive && showAdvancedControls && (\r\n                <div className=\"absolute bottom-20 left-4 bg-black bg-opacity-90 text-white rounded-lg p-4 space-y-4 min-w-80 live-controls-panel\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <h4 className=\"font-medium\">Paramètres avancés</h4>\r\n                    <button\r\n                      onClick={() => setShowAdvancedControls(false)}\r\n                      className=\"text-gray-400 hover:text-white\"\r\n                    >\r\n                      <X className=\"w-4 h-4\" />\r\n                    </button>\r\n                  </div>\r\n                  \r\n                  <div className=\"space-y-3\">\r\n                    {/* Latence */}\r\n                    <div>\r\n                      <label className=\"block text-xs text-gray-300 mb-1\">Latence</label>\r\n                      <select\r\n                        value={streamLatency}\r\n                        onChange={(e) => handleLatencyChange(e.target.value)}\r\n                        className=\"w-full bg-gray-800 text-white text-sm rounded px-2 py-1\"\r\n                      >\r\n                        <option value=\"ultra-low\">Ultra-faible</option>\r\n                        <option value=\"low\">Faible</option>\r\n                        <option value=\"medium\">Moyenne</option>\r\n                        <option value=\"high\">Élevée</option>\r\n                      </select>\r\n                    </div>\r\n\r\n                    {/* Bitrate */}\r\n                    <div>\r\n                      <label className=\"block text-xs text-gray-300 mb-1\">Bitrate (kbps)</label>\r\n                      <input\r\n                        type=\"range\"\r\n                        min=\"1000\"\r\n                        max=\"6000\"\r\n                        step=\"500\"\r\n                        value={bitrate}\r\n                        onChange={(e) => handleBitrateChange(parseInt(e.target.value))}\r\n                        className=\"w-full h-2 bg-gray-600 rounded-lg appearance-none cursor-pointer slider\"\r\n                      />\r\n                      <div className=\"flex justify-between text-xs text-gray-300\">\r\n                        <span>1000</span>\r\n                        <span>{bitrate}</span>\r\n                        <span>6000</span>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* FPS */}\r\n                    <div>\r\n                      <label className=\"block text-xs text-gray-300 mb-1\">FPS</label>\r\n                      <select\r\n                        value={fps}\r\n                        onChange={(e) => handleFpsChange(parseInt(e.target.value))}\r\n                        className=\"w-full bg-gray-800 text-white text-sm rounded px-2 py-1\"\r\n                      >\r\n                        <option value={24}>24 FPS</option>\r\n                        <option value={30}>30 FPS</option>\r\n                        <option value={60}>60 FPS</option>\r\n                      </select>\r\n                    </div>\r\n\r\n                    {/* Statistiques de streaming */}\r\n                    <div className=\"pt-2 border-t border-gray-700\">\r\n                      <div className=\"flex items-center space-x-2 text-xs\">\r\n                        <Wifi className=\"w-3 h-3\" />\r\n                        <span>Connexion stable</span>\r\n                      </div>\r\n                      <div className=\"flex items-center space-x-2 text-xs mt-1\">\r\n                        <Activity className=\"w-3 h-3\" />\r\n                        <span>Latence: {streamLatency === 'ultra-low' ? '< 1s' : streamLatency === 'low' ? '1-2s' : '2-3s'}</span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Formulaire de configuration */}\r\n            {!isLive && (\r\n              <div className=\"p-4 border-t\">\r\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                      Titre du live *\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"title\"\r\n                      value={formData.title}\r\n                      onChange={(e) => setFormData(prev => ({ ...prev, title: e.target.value }))}\r\n                      placeholder=\"Titre de votre live...\"\r\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                      required\r\n                    />\r\n                  </div>\r\n                  \r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                      Description (optionnel)\r\n                    </label>\r\n                    <textarea\r\n                      name=\"description\"\r\n                      value={formData.description}\r\n                      onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\r\n                      placeholder=\"Description de votre live...\"\r\n                      rows={2}\r\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none\"\r\n                    />\r\n                  </div>\r\n                  \r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                      Message de publication\r\n                    </label>\r\n                    <textarea\r\n                      name=\"content\"\r\n                      value={formData.content}\r\n                      onChange={(e) => setFormData(prev => ({ ...prev, content: e.target.value }))}\r\n                      placeholder=\"Message accompagnant votre live...\"\r\n                      rows={2}\r\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none\"\r\n                    />\r\n                  </div>\r\n                  \r\n                  <div className=\"flex justify-end space-x-3\">\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={onClose}\r\n                      className=\"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors\"\r\n                    >\r\n                      Annuler\r\n                    </button>\r\n                    <button\r\n                      type=\"submit\"\r\n                      disabled={isStarting}\r\n                      className=\"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2\"\r\n                    >\r\n                      {isStarting ? (\r\n                        <>\r\n                          <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\r\n                          <span>Démarrage...</span>\r\n                        </>\r\n                      ) : (\r\n                        <>\r\n                          <Play className=\"w-4 h-4\" />\r\n                          <span>Démarrer le live</span>\r\n                        </>\r\n                      )}\r\n                    </button>\r\n                  </div>\r\n                </form>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Chat */}\r\n          {isLive && (\r\n            <div className=\"w-80 border-l border-gray-200 flex flex-col\">\r\n              <div className=\"p-4 border-b\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <h4 className=\"font-medium text-gray-900\">Chat en direct</h4>\r\n                  <button\r\n                    onClick={() => setShowChat(!showChat)}\r\n                    className=\"text-gray-400 hover:text-gray-600 transition-colors\"\r\n                  >\r\n                    <MessageCircle className=\"w-5 h-5\" />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              \r\n              {showChat && (\r\n                <>\r\n                  <div className=\"flex-1 p-4 overflow-y-auto space-y-3\">\r\n                    {chatMessages.map((message) => (\r\n                      <div key={message.id} className=\"flex space-x-2\">\r\n                        <img\r\n                          src={message.author.profile_picture || '/default-avatar.png'}\r\n                          alt={message.author.first_name}\r\n                          className=\"w-6 h-6 rounded-full object-cover flex-shrink-0\"\r\n                        />\r\n                        <div className=\"flex-1\">\r\n                          <div className=\"bg-gray-50 rounded-lg px-3 py-2\">\r\n                            <div className=\"flex items-center space-x-2\">\r\n                              <span className=\"text-sm font-medium text-gray-900\">\r\n                                {message.author.first_name} {message.author.last_name}\r\n                              </span>\r\n                              <span className=\"text-xs text-gray-500\">\r\n                                {new Date(message.timestamp).toLocaleTimeString('fr-FR', { \r\n                                  hour: '2-digit', \r\n                                  minute: '2-digit' \r\n                                })}\r\n                              </span>\r\n                            </div>\r\n                            <p className=\"text-sm text-gray-700 mt-1\">{message.content}</p>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                  \r\n                  <div className=\"p-4 border-t\">\r\n                    <form onSubmit={(e) => { e.preventDefault(); sendChatMessage(); }} className=\"flex space-x-2\">\r\n                      <input\r\n                        type=\"text\"\r\n                        value={newMessage}\r\n                        onChange={(e) => setNewMessage(e.target.value)}\r\n                        placeholder=\"Tapez votre message...\"\r\n                        className=\"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm\"\r\n                      />\r\n                      <button\r\n                        type=\"submit\"\r\n                        disabled={!newMessage.trim()}\r\n                        className=\"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n                      >\r\n                        <Send className=\"w-4 h-4\" />\r\n                      </button>\r\n                    </form>\r\n                  </div>\r\n                </>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LiveStream; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
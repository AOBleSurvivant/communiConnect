{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DELL\\\\Documents\\\\mesProjets\\\\CommuniConnect\\\\frontend\\\\src\\\\components\\\\LiveStream.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { mediaAPI } from '../services/mediaAPI';\nimport { Video, VideoOff, Mic, MicOff, Camera, CameraOff, Play, Square, Settings, Users, MessageCircle, Send, X, Volume2, VolumeX, Share, MoreVertical, Sliders, Monitor, Wifi, Activity } from 'lucide-react';\nimport toast from 'react-hot-toast';\nimport { formatTime } from '../utils/timeUtils';\nimport LiveTimer from './LiveTimer';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst LiveStream = ({\n  isOpen,\n  onClose,\n  onLiveStarted\n}) => {\n  _s();\n  const {\n    user\n  } = useAuth();\n  const [isStarting, setIsStarting] = useState(false);\n  const [isLive, setIsLive] = useState(false);\n  const [stream, setStream] = useState(null);\n  const [liveData, setLiveData] = useState(null);\n  const [showChat, setShowChat] = useState(true);\n  const [isMuted, setIsMuted] = useState(false);\n  const [isVideoEnabled, setIsVideoEnabled] = useState(true);\n  const [viewersCount, setViewersCount] = useState(0);\n  const [chatMessages, setChatMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n\n  // Nouveaux états pour les contrôles de niveau live\n  const [streamVolume, setStreamVolume] = useState(100);\n  const [videoQuality, setVideoQuality] = useState('720p');\n  const [showAdvancedControls, setShowAdvancedControls] = useState(false);\n  const [streamLatency, setStreamLatency] = useState('low');\n  const [bitrate, setBitrate] = useState(2500);\n  const [fps, setFps] = useState(30);\n\n  // États pour la vidéo enregistrée\n  const [recordedVideo, setRecordedVideo] = useState(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [videoDuration, setVideoDuration] = useState(0);\n  const [currentTime, setCurrentTime] = useState(0);\n\n  // États pour le chronomètre du live\n  const [liveStartTime, setLiveStartTime] = useState(null);\n  const [liveDuration, setLiveDuration] = useState(0);\n  const videoRef = useRef(null);\n  const mediaRecorderRef = useRef(null);\n  const streamRef = useRef(null);\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    content: ''\n  });\n  useEffect(() => {\n    if (isOpen && !stream) {\n      startCamera();\n    }\n    return () => {\n      stopCamera();\n      // Nettoyer l'URL de la vidéo enregistrée\n      if (recordedVideo) {\n        URL.revokeObjectURL(recordedVideo);\n      }\n    };\n  }, [isOpen, recordedVideo]);\n\n  // Effet pour le chronomètre du live\n  useEffect(() => {\n    let interval;\n    if (isLive && liveStartTime) {\n      interval = setInterval(() => {\n        const now = Date.now();\n        const duration = Math.floor((now - liveStartTime) / 1000);\n        setLiveDuration(duration);\n      }, 1000);\n    }\n    return () => {\n      if (interval) {\n        clearInterval(interval);\n      }\n    };\n  }, [isLive, liveStartTime]);\n  const startCamera = async () => {\n    // Vérifier que l'API getUserMedia est disponible\n    if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\n      toast.error('Votre navigateur ne supporte pas l\\'accès à la caméra');\n      return;\n    }\n    try {\n      // Première tentative avec des contraintes optimales\n      const constraints = {\n        video: {\n          width: {\n            ideal: 1280\n          },\n          height: {\n            ideal: 720\n          },\n          frameRate: {\n            ideal: 30\n          }\n        },\n        audio: {\n          echoCancellation: true,\n          noiseSuppression: true,\n          autoGainControl: true\n        }\n      };\n\n      // Créer une promesse avec timeout plus long\n      const getUserMediaPromise = navigator.mediaDevices.getUserMedia(constraints);\n      const timeoutPromise = new Promise((_, reject) => {\n        setTimeout(() => reject(new Error('Timeout: Impossible d\\'accéder à la caméra dans le délai imparti')), 30000);\n      });\n      const mediaStream = await Promise.race([getUserMediaPromise, timeoutPromise]);\n      setStream(mediaStream);\n      streamRef.current = mediaStream;\n      if (videoRef.current) {\n        videoRef.current.srcObject = mediaStream;\n      }\n    } catch (error) {\n      console.error('Première tentative échouée, essai avec des contraintes simplifiées:', error);\n\n      // Deuxième tentative avec des contraintes plus simples\n      try {\n        const simpleConstraints = {\n          video: true,\n          audio: true\n        };\n        const mediaStream = await navigator.mediaDevices.getUserMedia(simpleConstraints);\n        setStream(mediaStream);\n        streamRef.current = mediaStream;\n        if (videoRef.current) {\n          videoRef.current.srcObject = mediaStream;\n        }\n        toast.success('Caméra démarrée avec des paramètres de base');\n      } catch (secondError) {\n        console.error('Erreur accès caméra (tentative finale):', secondError);\n\n        // Messages d'erreur plus spécifiques\n        if (secondError.name === 'NotAllowedError') {\n          toast.error('Accès à la caméra refusé. Veuillez autoriser l\\'accès dans les paramètres du navigateur.');\n        } else if (secondError.name === 'NotFoundError') {\n          toast.error('Aucune caméra trouvée. Veuillez connecter une caméra.');\n        } else if (secondError.message.includes('Timeout')) {\n          toast.error('Délai d\\'attente dépassé. Vérifiez que votre caméra n\\'est pas utilisée par une autre application.');\n        } else {\n          toast.error('Impossible d\\'accéder à la caméra/microphone. Vérifiez vos permissions.');\n        }\n      }\n    }\n  };\n  const stopCamera = () => {\n    if (streamRef.current) {\n      streamRef.current.getTracks().forEach(track => track.stop());\n      setStream(null);\n      streamRef.current = null;\n    }\n  };\n  const toggleMute = () => {\n    if (stream) {\n      const audioTrack = stream.getAudioTracks()[0];\n      if (audioTrack) {\n        audioTrack.enabled = !audioTrack.enabled;\n        setIsMuted(!isMuted);\n      }\n    }\n  };\n  const toggleVideo = () => {\n    if (stream) {\n      const videoTrack = stream.getVideoTracks()[0];\n      if (videoTrack) {\n        videoTrack.enabled = !videoTrack.enabled;\n        setIsVideoEnabled(!isVideoEnabled);\n      }\n    }\n  };\n  const startLive = async () => {\n    // Si pas de titre, utiliser un titre par défaut\n    const liveData = {\n      title: formData.title.trim() || `Live de ${(user === null || user === void 0 ? void 0 : user.first_name) || 'Utilisateur'}`,\n      description: formData.description.trim() || 'Live en cours...',\n      content: formData.content.trim() || 'Live démarré !'\n    };\n    setIsStarting(true);\n    try {\n      const response = await mediaAPI.startLive(liveData);\n      setLiveData(response);\n      setIsLive(true);\n      setLiveStartTime(Date.now()); // Démarrer le chronomètre\n\n      // Démarrer l'enregistrement de la vidéo\n      if (stream && !mediaRecorderRef.current) {\n        const mediaRecorder = new MediaRecorder(stream, {\n          mimeType: 'video/webm;codecs=vp8,opus'\n        });\n        mediaRecorderRef.current = mediaRecorder;\n        mediaRecorderRef.current.recordedChunks = [];\n        mediaRecorderRef.current.ondataavailable = event => {\n          if (event.data.size > 0) {\n            mediaRecorderRef.current.recordedChunks.push(event.data);\n          }\n        };\n        mediaRecorderRef.current.start(1000); // Enregistrer par segments de 1 seconde\n      }\n      toast.success('Live démarré avec succès !');\n      onLiveStarted === null || onLiveStarted === void 0 ? void 0 : onLiveStarted(response);\n    } catch (error) {\n      console.error('Erreur démarrage live:', error);\n      toast.error('Erreur lors du démarrage du live');\n    } finally {\n      setIsStarting(false);\n    }\n  };\n  const stopLive = async () => {\n    if (!liveData) return;\n    try {\n      // Arrêter l'enregistrement si actif\n      if (mediaRecorderRef.current && mediaRecorderRef.current.state === 'recording') {\n        mediaRecorderRef.current.stop();\n      }\n      const response = await mediaAPI.stopLive(liveData.live_id);\n      setIsLive(false);\n      setLiveData(null);\n      setLiveStartTime(null); // Arrêter le chronomètre\n      setLiveDuration(0);\n\n      // Créer une URL pour la vidéo enregistrée\n      if (mediaRecorderRef.current && mediaRecorderRef.current.recordedChunks && mediaRecorderRef.current.recordedChunks.length > 0) {\n        const blob = new Blob(mediaRecorderRef.current.recordedChunks, {\n          type: 'video/webm'\n        });\n        const videoUrl = URL.createObjectURL(blob);\n        setRecordedVideo(videoUrl);\n\n        // Configurer la vidéo pour la lecture avec un délai pour s'assurer que le DOM est mis à jour\n        setTimeout(() => {\n          if (videoRef.current) {\n            videoRef.current.src = videoUrl;\n            videoRef.current.load();\n            videoRef.current.addEventListener('loadedmetadata', () => {\n              setVideoDuration(videoRef.current.duration);\n              setCurrentTime(0);\n              setIsPlaying(false);\n            });\n          }\n        }, 100);\n        toast.success('Live arrêté - Vidéo disponible pour lecture');\n      } else {\n        toast.warning('Aucune vidéo enregistrée disponible');\n      }\n    } catch (error) {\n      console.error('Erreur arrêt live:', error);\n      toast.error('Erreur lors de l\\'arrêt du live');\n    }\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    startLive();\n  };\n  const sendChatMessage = () => {\n    if (!newMessage.trim()) return;\n    const message = {\n      id: Date.now(),\n      author: user,\n      content: newMessage,\n      timestamp: new Date().toISOString()\n    };\n    setChatMessages(prev => [...prev, message]);\n    setNewMessage('');\n  };\n\n  // Nouvelles fonctions pour les contrôles de niveau live\n  const handleVolumeChange = newVolume => {\n    setStreamVolume(newVolume);\n    if (stream) {\n      const audioTrack = stream.getAudioTracks()[0];\n      if (audioTrack) {\n        // Ajuster le volume du stream audio\n        const audioContext = new (window.AudioContext || window.webkitAudioContext)();\n        const source = audioContext.createMediaStreamSource(stream);\n        const gainNode = audioContext.createGain();\n        gainNode.gain.value = newVolume / 100;\n        source.connect(gainNode);\n      }\n    }\n  };\n  const handleQualityChange = quality => {\n    setVideoQuality(quality);\n    // Dans un vrai projet, vous ajusteriez la qualité du stream ici\n    toast.success(`Qualité vidéo changée vers ${quality}`);\n  };\n  const handleLatencyChange = latency => {\n    setStreamLatency(latency);\n    // Dans un vrai projet, vous ajusteriez la latence du stream ici\n    toast.success(`Latence changée vers ${latency}`);\n  };\n  const handleBitrateChange = newBitrate => {\n    setBitrate(newBitrate);\n    // Dans un vrai projet, vous ajusteriez le bitrate du stream ici\n    toast.success(`Bitrate changé vers ${newBitrate} kbps`);\n  };\n  const handleFpsChange = newFps => {\n    setFps(newFps);\n    // Dans un vrai projet, vous ajusteriez le FPS du stream ici\n    toast.success(`FPS changé vers ${newFps}`);\n  };\n\n  // Fonctions pour la lecture de la vidéo enregistrée\n  const togglePlayPause = () => {\n    if (videoRef.current && recordedVideo) {\n      if (isPlaying) {\n        videoRef.current.pause();\n        setIsPlaying(false);\n      } else {\n        const playPromise = videoRef.current.play();\n        if (playPromise !== undefined) {\n          playPromise.then(() => {\n            setIsPlaying(true);\n          }).catch(error => {\n            console.error('Erreur lors de la lecture:', error);\n            toast.error('Erreur lors de la lecture de la vidéo');\n          });\n        }\n      }\n    }\n  };\n  const handleTimeUpdate = () => {\n    if (videoRef.current) {\n      setCurrentTime(videoRef.current.currentTime);\n    }\n  };\n  const handleLoadedMetadata = () => {\n    if (videoRef.current) {\n      setVideoDuration(videoRef.current.duration);\n    }\n  };\n  const handleSeek = e => {\n    if (videoRef.current) {\n      const rect = e.currentTarget.getBoundingClientRect();\n      const clickX = e.clientX - rect.left;\n      const width = rect.width;\n      const seekTime = clickX / width * videoDuration;\n      videoRef.current.currentTime = seekTime;\n      setCurrentTime(seekTime);\n    }\n  };\n  if (!isOpen) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg shadow-xl w-full max-w-6xl mx-4 max-h-[90vh] overflow-hidden\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between p-4 border-b\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold text-gray-900\",\n          children: isLive ? 'Live en cours' : recordedVideo ? 'Vidéo enregistrée' : 'Démarrer un live'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"text-gray-400 hover:text-gray-600 transition-colors\",\n          children: /*#__PURE__*/_jsxDEV(X, {\n            className: \"w-6 h-6\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 414,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex h-[calc(90vh-120px)]\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 flex flex-col\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1 bg-black relative\",\n            children: [/*#__PURE__*/_jsxDEV(\"video\", {\n              ref: videoRef,\n              autoPlay: !recordedVideo,\n              muted: !recordedVideo,\n              playsInline: true,\n              className: \"w-full h-full object-cover transform scale-x-[-1]\",\n              style: {\n                transform: recordedVideo ? 'none' : 'scaleX(-1)'\n              },\n              onTimeUpdate: handleTimeUpdate,\n              onLoadedMetadata: handleLoadedMetadata,\n              onPlay: () => setIsPlaying(true),\n              onPause: () => setIsPlaying(false),\n              onEnded: () => setIsPlaying(false)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 423,\n              columnNumber: 15\n            }, this), isLive && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute top-4 left-4 bg-red-600 text-white px-3 py-1 rounded-full text-sm font-medium flex items-center space-x-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-2 h-2 bg-white rounded-full animate-pulse\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 440,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"EN DIRECT\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 441,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(LiveTimer, {\n                startTime: liveStartTime,\n                isActive: isLive,\n                variant: \"compact\",\n                className: \"ml-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 442,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 439,\n              columnNumber: 17\n            }, this), isLive && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute top-4 right-4 bg-black bg-opacity-50 text-white px-3 py-1 rounded-full text-sm\",\n              children: [viewersCount, \" spectateurs\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 453,\n              columnNumber: 17\n            }, this), !isLive && stream && !recordedVideo && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute inset-0 flex items-center justify-center bg-black bg-opacity-30\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"bg-white rounded-lg p-6 shadow-2xl max-w-md mx-4\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                    className: \"text-lg font-semibold text-gray-900 mb-4\",\n                    children: \"Pr\\xEAt \\xE0 d\\xE9marrer votre live ?\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 463,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-gray-600 mb-6\",\n                    children: \"Votre cam\\xE9ra est active. Cliquez sur \\\"D\\xE9marrer le live\\\" pour commencer \\xE0 diffuser.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 466,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex space-x-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: onClose,\n                      className: \"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors\",\n                      children: \"Annuler\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 470,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: startLive,\n                      disabled: isStarting,\n                      className: \"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed\",\n                      children: isStarting ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 483,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                          children: \"D\\xE9marrage...\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 484,\n                          columnNumber: 31\n                        }, this)]\n                      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                        children: [/*#__PURE__*/_jsxDEV(Play, {\n                          className: \"w-4 h-4\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 488,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                          children: \"D\\xE9marrer le live\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 489,\n                          columnNumber: 31\n                        }, this)]\n                      }, void 0, true)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 476,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 469,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 462,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 461,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 460,\n              columnNumber: 17\n            }, this), !stream && !isLive && !recordedVideo && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute inset-0 flex items-center justify-center bg-gray-900\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center text-white\",\n                children: [/*#__PURE__*/_jsxDEV(Camera, {\n                  className: \"w-16 h-16 mx-auto mb-4 text-gray-400\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 503,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"text-lg font-semibold mb-2\",\n                  children: \"Acc\\xE8s \\xE0 la cam\\xE9ra\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 504,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-gray-400 mb-4\",\n                  children: \"Autorisez l'acc\\xE8s \\xE0 votre cam\\xE9ra pour commencer le live\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 505,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: startCamera,\n                  className: \"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\",\n                  children: \"Autoriser la cam\\xE9ra\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 508,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 502,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 501,\n              columnNumber: 17\n            }, this), recordedVideo && !isLive && videoDuration === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center text-white\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-white mb-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 522,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"text-lg font-semibold mb-2\",\n                  children: \"Pr\\xE9paration de la vid\\xE9o\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 523,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-gray-300\",\n                  children: \"Votre vid\\xE9o enregistr\\xE9e est en cours de pr\\xE9paration...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 524,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 521,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 520,\n              columnNumber: 17\n            }, this), isLive && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute bottom-6 left-6 right-6 flex items-center justify-between bg-gradient-to-t from-black/80 to-transparent p-4 rounded-lg\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-3\",\n                children: [/*#__PURE__*/_jsxDEV(LiveTimer, {\n                  startTime: liveStartTime,\n                  isActive: isLive,\n                  variant: \"detailed\",\n                  className: \"mr-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 536,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: toggleMute,\n                  className: `p-3 rounded-full transition-all duration-200 shadow-lg ${isMuted ? 'bg-red-500 text-white hover:bg-red-600' : 'bg-black/70 text-white hover:bg-black/90'}`,\n                  title: isMuted ? 'Activer le micro' : 'Désactiver le micro',\n                  children: isMuted ? /*#__PURE__*/_jsxDEV(MicOff, {\n                    className: \"w-5 h-5\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 549,\n                    columnNumber: 32\n                  }, this) : /*#__PURE__*/_jsxDEV(Mic, {\n                    className: \"w-5 h-5\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 549,\n                    columnNumber: 65\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 542,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: toggleVideo,\n                  className: `p-3 rounded-full transition-all duration-200 shadow-lg ${!isVideoEnabled ? 'bg-red-500 text-white hover:bg-red-600' : 'bg-black/70 text-white hover:bg-black/90'}`,\n                  title: isVideoEnabled ? 'Désactiver la caméra' : 'Activer la caméra',\n                  children: isVideoEnabled ? /*#__PURE__*/_jsxDEV(Camera, {\n                    className: \"w-5 h-5\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 559,\n                    columnNumber: 39\n                  }, this) : /*#__PURE__*/_jsxDEV(CameraOff, {\n                    className: \"w-5 h-5\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 559,\n                    columnNumber: 72\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 552,\n                  columnNumber: 19\n                }, this), isLive && /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center space-x-2 bg-black/70 rounded-lg px-3 py-2 backdrop-blur-sm\",\n                    children: [/*#__PURE__*/_jsxDEV(Volume2, {\n                      className: \"w-4 h-4 text-white\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 567,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"range\",\n                      min: \"0\",\n                      max: \"100\",\n                      value: streamVolume,\n                      onChange: e => handleVolumeChange(parseInt(e.target.value)),\n                      className: \"w-20 h-2 bg-gray-600 rounded-lg appearance-none cursor-pointer slider\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 568,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-white text-xs font-medium\",\n                      children: [streamVolume, \"%\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 576,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 566,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center space-x-2 bg-black/70 rounded-lg px-3 py-2 backdrop-blur-sm\",\n                    children: [/*#__PURE__*/_jsxDEV(Monitor, {\n                      className: \"w-4 h-4 text-white\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 581,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                      value: videoQuality,\n                      onChange: e => handleQualityChange(e.target.value),\n                      className: \"bg-transparent text-white text-xs border-none outline-none font-medium\",\n                      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"480p\",\n                        children: \"480p\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 587,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"720p\",\n                        children: \"720p\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 588,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"1080p\",\n                        children: \"1080p\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 589,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 582,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 580,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => setShowAdvancedControls(!showAdvancedControls),\n                    className: \"p-3 rounded-full transition-all duration-200 bg-black/70 text-white hover:bg-black/90 shadow-lg\",\n                    title: \"Param\\xE8tres avanc\\xE9s\",\n                    children: /*#__PURE__*/_jsxDEV(Sliders, {\n                      className: \"w-5 h-5\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 599,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 594,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 534,\n                columnNumber: 17\n              }, this), isLive && /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: stopLive,\n                className: \"bg-red-600 text-white px-6 py-3 rounded-lg hover:bg-red-700 transition-all duration-200 flex items-center space-x-2 shadow-lg font-medium\",\n                children: [/*#__PURE__*/_jsxDEV(Square, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 610,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Arr\\xEAter le live\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 611,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 606,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 533,\n              columnNumber: 17\n            }, this), recordedVideo && !isLive && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute bottom-6 left-6 right-6 bg-gradient-to-t from-black/80 to-transparent p-4 rounded-lg\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-between mb-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center space-x-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: togglePlayPause,\n                    className: \"p-3 rounded-full bg-black/70 text-white hover:bg-black/90 transition-all duration-200 shadow-lg\",\n                    title: isPlaying ? 'Pause' : 'Lecture',\n                    children: isPlaying ? /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"w-5 h-5 flex items-center justify-center\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"w-1 h-4 bg-white mx-0.5\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 629,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"w-1 h-4 bg-white mx-0.5\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 630,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 628,\n                      columnNumber: 27\n                    }, this) : /*#__PURE__*/_jsxDEV(Play, {\n                      className: \"w-5 h-5\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 633,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 622,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-white text-sm font-medium\",\n                    children: videoDuration > 0 ? `${formatTime(currentTime)} / ${formatTime(videoDuration)}` : 'Chargement...'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 637,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 621,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: onClose,\n                  className: \"text-white hover:text-gray-300 transition-colors\",\n                  title: \"Fermer\",\n                  children: /*#__PURE__*/_jsxDEV(X, {\n                    className: \"w-5 h-5\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 647,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 642,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 620,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-full h-2 bg-gray-600 rounded-full cursor-pointer relative\",\n                onClick: handleSeek,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"h-full bg-red-600 rounded-full transition-all duration-200\",\n                  style: {\n                    width: `${videoDuration > 0 ? currentTime / videoDuration * 100 : 0}%`\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 656,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 652,\n                columnNumber: 19\n              }, this), videoDuration === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center text-white text-sm mt-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"inline-block animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 665,\n                  columnNumber: 23\n                }, this), \"Pr\\xE9paration de la vid\\xE9o...\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 664,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 619,\n              columnNumber: 17\n            }, this), isLive && showAdvancedControls && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute bottom-32 left-6 bg-black/95 text-white rounded-lg p-6 space-y-4 min-w-80 live-controls-panel backdrop-blur-sm shadow-2xl border border-white/10\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: \"font-medium\",\n                  children: \"Param\\xE8tres avanc\\xE9s\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 676,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => setShowAdvancedControls(false),\n                  className: \"text-gray-400 hover:text-white\",\n                  children: /*#__PURE__*/_jsxDEV(X, {\n                    className: \"w-4 h-4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 681,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 677,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 675,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-xs text-gray-300 mb-1\",\n                    children: \"Latence\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 688,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    value: streamLatency,\n                    onChange: e => handleLatencyChange(e.target.value),\n                    className: \"w-full bg-gray-800 text-white text-sm rounded px-2 py-1\",\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"ultra-low\",\n                      children: \"Ultra-faible\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 694,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"low\",\n                      children: \"Faible\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 695,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"medium\",\n                      children: \"Moyenne\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 696,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"high\",\n                      children: \"\\xC9lev\\xE9e\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 697,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 689,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 687,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-xs text-gray-300 mb-1\",\n                    children: \"Bitrate (kbps)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 703,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"range\",\n                    min: \"1000\",\n                    max: \"6000\",\n                    step: \"500\",\n                    value: bitrate,\n                    onChange: e => handleBitrateChange(parseInt(e.target.value)),\n                    className: \"w-full h-2 bg-gray-600 rounded-lg appearance-none cursor-pointer slider\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 704,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex justify-between text-xs text-gray-300\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      children: \"1000\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 714,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: bitrate\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 715,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: \"6000\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 716,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 713,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 702,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-xs text-gray-300 mb-1\",\n                    children: \"FPS\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 722,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    value: fps,\n                    onChange: e => handleFpsChange(parseInt(e.target.value)),\n                    className: \"w-full bg-gray-800 text-white text-sm rounded px-2 py-1\",\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: 24,\n                      children: \"24 FPS\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 728,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: 30,\n                      children: \"30 FPS\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 729,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: 60,\n                      children: \"60 FPS\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 730,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 723,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 721,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"pt-2 border-t border-gray-700\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center space-x-2 text-xs\",\n                    children: [/*#__PURE__*/_jsxDEV(Wifi, {\n                      className: \"w-3 h-3\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 737,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: \"Connexion stable\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 738,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 736,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center space-x-2 text-xs mt-1\",\n                    children: [/*#__PURE__*/_jsxDEV(Activity, {\n                      className: \"w-3 h-3\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 741,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: [\"Latence: \", streamLatency === 'ultra-low' ? '< 1s' : streamLatency === 'low' ? '1-2s' : '2-3s']\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 742,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 740,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 735,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 685,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 674,\n              columnNumber: 17\n            }, this), recordedVideo && !isLive && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute top-4 left-4 bg-green-600 text-white px-3 py-1 rounded-full text-sm font-medium flex items-center space-x-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-2 h-2 bg-white rounded-full\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 752,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"VID\\xC9O ENREGISTR\\xC9E\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 753,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 751,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 422,\n            columnNumber: 13\n          }, this), !isLive && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4 border-t\",\n            children: /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: handleSubmit,\n              className: \"space-y-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-sm font-medium text-gray-700 mb-2\",\n                  children: \"Titre du live *\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 763,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  name: \"title\",\n                  value: formData.title,\n                  onChange: e => setFormData(prev => ({\n                    ...prev,\n                    title: e.target.value\n                  })),\n                  placeholder: \"Titre de votre live...\",\n                  className: \"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\",\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 766,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 762,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-sm font-medium text-gray-700 mb-2\",\n                  children: \"Description (optionnel)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 778,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  name: \"description\",\n                  value: formData.description,\n                  onChange: e => setFormData(prev => ({\n                    ...prev,\n                    description: e.target.value\n                  })),\n                  placeholder: \"Description de votre live...\",\n                  rows: 2,\n                  className: \"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 781,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 777,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-sm font-medium text-gray-700 mb-2\",\n                  children: \"Message de publication\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 792,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  name: \"content\",\n                  value: formData.content,\n                  onChange: e => setFormData(prev => ({\n                    ...prev,\n                    content: e.target.value\n                  })),\n                  placeholder: \"Message accompagnant votre live...\",\n                  rows: 2,\n                  className: \"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 795,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 791,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-end space-x-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  onClick: onClose,\n                  className: \"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors\",\n                  children: \"Annuler\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 806,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"submit\",\n                  disabled: isStarting,\n                  className: \"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2\",\n                  children: isStarting ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 820,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: \"D\\xE9marrage...\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 821,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(Play, {\n                      className: \"w-4 h-4\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 825,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: \"D\\xE9marrer le live\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 826,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 813,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 805,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 761,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 760,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 11\n        }, this), isLive && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-80 border-l border-gray-200 flex flex-col\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4 border-b\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"font-medium text-gray-900\",\n                children: \"Chat en direct\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 841,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setShowChat(!showChat),\n                className: \"text-gray-400 hover:text-gray-600 transition-colors\",\n                children: /*#__PURE__*/_jsxDEV(MessageCircle, {\n                  className: \"w-5 h-5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 846,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 842,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 840,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 839,\n            columnNumber: 15\n          }, this), showChat && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-1 p-4 overflow-y-auto space-y-3\",\n              children: chatMessages.map(message => {\n                var _message$author, _message$author2, _message$author3, _message$author4;\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex space-x-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    src: ((_message$author = message.author) === null || _message$author === void 0 ? void 0 : _message$author.profile_picture) || '/default-avatar.svg',\n                    alt: ((_message$author2 = message.author) === null || _message$author2 === void 0 ? void 0 : _message$author2.first_name) || 'Utilisateur',\n                    className: \"w-6 h-6 rounded-full object-cover flex-shrink-0\",\n                    onError: e => {\n                      e.target.src = '/default-avatar.svg';\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 856,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex-1\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"bg-gray-50 rounded-lg px-3 py-2\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex items-center space-x-2\",\n                        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"text-sm font-medium text-gray-900\",\n                          children: [((_message$author3 = message.author) === null || _message$author3 === void 0 ? void 0 : _message$author3.first_name) || 'Utilisateur', \" \", ((_message$author4 = message.author) === null || _message$author4 === void 0 ? void 0 : _message$author4.last_name) || '']\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 867,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"text-xs text-gray-500\",\n                          children: new Date(message.timestamp).toLocaleTimeString('fr-FR', {\n                            hour: '2-digit',\n                            minute: '2-digit'\n                          })\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 870,\n                          columnNumber: 31\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 866,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"text-sm text-gray-700 mt-1\",\n                        children: message.content\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 877,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 865,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 864,\n                    columnNumber: 25\n                  }, this)]\n                }, message.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 855,\n                  columnNumber: 23\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 853,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-4 border-t\",\n              children: /*#__PURE__*/_jsxDEV(\"form\", {\n                onSubmit: e => {\n                  e.preventDefault();\n                  sendChatMessage();\n                },\n                className: \"flex space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: newMessage,\n                  onChange: e => setNewMessage(e.target.value),\n                  placeholder: \"Tapez votre message...\",\n                  className: \"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 886,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"submit\",\n                  disabled: !newMessage.trim(),\n                  className: \"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\",\n                  children: /*#__PURE__*/_jsxDEV(Send, {\n                    className: \"w-4 h-4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 898,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 893,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 885,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 884,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 838,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 418,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 403,\n    columnNumber: 5\n  }, this);\n};\n_s(LiveStream, \"OoCSF8vcOY7dmqBEr+kOD6Ujpr8=\", false, function () {\n  return [useAuth];\n});\n_c = LiveStream;\nexport default LiveStream;\nvar _c;\n$RefreshReg$(_c, \"LiveStream\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useAuth","mediaAPI","Video","VideoOff","Mic","MicOff","Camera","CameraOff","Play","Square","Settings","Users","MessageCircle","Send","X","Volume2","VolumeX","Share","MoreVertical","Sliders","Monitor","Wifi","Activity","toast","formatTime","LiveTimer","jsxDEV","_jsxDEV","Fragment","_Fragment","LiveStream","isOpen","onClose","onLiveStarted","_s","user","isStarting","setIsStarting","isLive","setIsLive","stream","setStream","liveData","setLiveData","showChat","setShowChat","isMuted","setIsMuted","isVideoEnabled","setIsVideoEnabled","viewersCount","setViewersCount","chatMessages","setChatMessages","newMessage","setNewMessage","streamVolume","setStreamVolume","videoQuality","setVideoQuality","showAdvancedControls","setShowAdvancedControls","streamLatency","setStreamLatency","bitrate","setBitrate","fps","setFps","recordedVideo","setRecordedVideo","isPlaying","setIsPlaying","videoDuration","setVideoDuration","currentTime","setCurrentTime","liveStartTime","setLiveStartTime","liveDuration","setLiveDuration","videoRef","mediaRecorderRef","streamRef","formData","setFormData","title","description","content","startCamera","stopCamera","URL","revokeObjectURL","interval","setInterval","now","Date","duration","Math","floor","clearInterval","navigator","mediaDevices","getUserMedia","error","constraints","video","width","ideal","height","frameRate","audio","echoCancellation","noiseSuppression","autoGainControl","getUserMediaPromise","timeoutPromise","Promise","_","reject","setTimeout","Error","mediaStream","race","current","srcObject","console","simpleConstraints","success","secondError","name","message","includes","getTracks","forEach","track","stop","toggleMute","audioTrack","getAudioTracks","enabled","toggleVideo","videoTrack","getVideoTracks","startLive","trim","first_name","response","mediaRecorder","MediaRecorder","mimeType","recordedChunks","ondataavailable","event","data","size","push","start","stopLive","state","live_id","length","blob","Blob","type","videoUrl","createObjectURL","src","load","addEventListener","warning","handleSubmit","e","preventDefault","sendChatMessage","id","author","timestamp","toISOString","prev","handleVolumeChange","newVolume","audioContext","window","AudioContext","webkitAudioContext","source","createMediaStreamSource","gainNode","createGain","gain","value","connect","handleQualityChange","quality","handleLatencyChange","latency","handleBitrateChange","newBitrate","handleFpsChange","newFps","togglePlayPause","pause","playPromise","play","undefined","then","catch","handleTimeUpdate","handleLoadedMetadata","handleSeek","rect","currentTarget","getBoundingClientRect","clickX","clientX","left","seekTime","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","ref","autoPlay","muted","playsInline","style","transform","onTimeUpdate","onLoadedMetadata","onPlay","onPause","onEnded","startTime","isActive","variant","disabled","min","max","onChange","parseInt","target","step","onSubmit","placeholder","required","rows","map","_message$author","_message$author2","_message$author3","_message$author4","profile_picture","alt","onError","last_name","toLocaleTimeString","hour","minute","_c","$RefreshReg$"],"sources":["C:/Users/DELL/Documents/mesProjets/CommuniConnect/frontend/src/components/LiveStream.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { mediaAPI } from '../services/mediaAPI';\nimport { \n  Video, \n  VideoOff, \n  Mic, \n  MicOff, \n  Camera, \n  CameraOff,\n  Play,\n  Square,\n  Settings,\n  Users,\n  MessageCircle,\n  Send,\n  X,\n  Volume2,\n  VolumeX,\n  Share,\n  MoreVertical,\n  Sliders,\n  Monitor,\n  Wifi,\n  Activity\n} from 'lucide-react';\nimport toast from 'react-hot-toast';\nimport { formatTime } from '../utils/timeUtils';\nimport LiveTimer from './LiveTimer';\n\nconst LiveStream = ({ isOpen, onClose, onLiveStarted }) => {\n  const { user } = useAuth();\n  const [isStarting, setIsStarting] = useState(false);\n  const [isLive, setIsLive] = useState(false);\n  const [stream, setStream] = useState(null);\n  const [liveData, setLiveData] = useState(null);\n  const [showChat, setShowChat] = useState(true);\n  const [isMuted, setIsMuted] = useState(false);\n  const [isVideoEnabled, setIsVideoEnabled] = useState(true);\n  const [viewersCount, setViewersCount] = useState(0);\n  const [chatMessages, setChatMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  \n  // Nouveaux états pour les contrôles de niveau live\n  const [streamVolume, setStreamVolume] = useState(100);\n  const [videoQuality, setVideoQuality] = useState('720p');\n  const [showAdvancedControls, setShowAdvancedControls] = useState(false);\n  const [streamLatency, setStreamLatency] = useState('low');\n  const [bitrate, setBitrate] = useState(2500);\n  const [fps, setFps] = useState(30);\n  \n  // États pour la vidéo enregistrée\n  const [recordedVideo, setRecordedVideo] = useState(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [videoDuration, setVideoDuration] = useState(0);\n  const [currentTime, setCurrentTime] = useState(0);\n  \n  // États pour le chronomètre du live\n  const [liveStartTime, setLiveStartTime] = useState(null);\n  const [liveDuration, setLiveDuration] = useState(0);\n  \n  const videoRef = useRef(null);\n  const mediaRecorderRef = useRef(null);\n  const streamRef = useRef(null);\n\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    content: ''\n  });\n\n  useEffect(() => {\n    if (isOpen && !stream) {\n      startCamera();\n    }\n    \n    return () => {\n      stopCamera();\n      // Nettoyer l'URL de la vidéo enregistrée\n      if (recordedVideo) {\n        URL.revokeObjectURL(recordedVideo);\n      }\n    };\n  }, [isOpen, recordedVideo]);\n\n  // Effet pour le chronomètre du live\n  useEffect(() => {\n    let interval;\n    \n    if (isLive && liveStartTime) {\n      interval = setInterval(() => {\n        const now = Date.now();\n        const duration = Math.floor((now - liveStartTime) / 1000);\n        setLiveDuration(duration);\n      }, 1000);\n    }\n    \n    return () => {\n      if (interval) {\n        clearInterval(interval);\n      }\n    };\n  }, [isLive, liveStartTime]);\n\n  const startCamera = async () => {\n    // Vérifier que l'API getUserMedia est disponible\n    if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\n      toast.error('Votre navigateur ne supporte pas l\\'accès à la caméra');\n      return;\n    }\n\n    try {\n      // Première tentative avec des contraintes optimales\n      const constraints = {\n        video: {\n          width: { ideal: 1280 },\n          height: { ideal: 720 },\n          frameRate: { ideal: 30 }\n        },\n        audio: {\n          echoCancellation: true,\n          noiseSuppression: true,\n          autoGainControl: true\n        }\n      };\n\n      // Créer une promesse avec timeout plus long\n      const getUserMediaPromise = navigator.mediaDevices.getUserMedia(constraints);\n      const timeoutPromise = new Promise((_, reject) => {\n        setTimeout(() => reject(new Error('Timeout: Impossible d\\'accéder à la caméra dans le délai imparti')), 30000);\n      });\n\n      const mediaStream = await Promise.race([getUserMediaPromise, timeoutPromise]);\n      \n      setStream(mediaStream);\n      streamRef.current = mediaStream;\n      \n      if (videoRef.current) {\n        videoRef.current.srcObject = mediaStream;\n      }\n    } catch (error) {\n      console.error('Première tentative échouée, essai avec des contraintes simplifiées:', error);\n      \n      // Deuxième tentative avec des contraintes plus simples\n      try {\n        const simpleConstraints = {\n          video: true,\n          audio: true\n        };\n\n        const mediaStream = await navigator.mediaDevices.getUserMedia(simpleConstraints);\n        \n        setStream(mediaStream);\n        streamRef.current = mediaStream;\n        \n        if (videoRef.current) {\n          videoRef.current.srcObject = mediaStream;\n        }\n        \n        toast.success('Caméra démarrée avec des paramètres de base');\n      } catch (secondError) {\n        console.error('Erreur accès caméra (tentative finale):', secondError);\n        \n        // Messages d'erreur plus spécifiques\n        if (secondError.name === 'NotAllowedError') {\n          toast.error('Accès à la caméra refusé. Veuillez autoriser l\\'accès dans les paramètres du navigateur.');\n        } else if (secondError.name === 'NotFoundError') {\n          toast.error('Aucune caméra trouvée. Veuillez connecter une caméra.');\n        } else if (secondError.message.includes('Timeout')) {\n          toast.error('Délai d\\'attente dépassé. Vérifiez que votre caméra n\\'est pas utilisée par une autre application.');\n        } else {\n          toast.error('Impossible d\\'accéder à la caméra/microphone. Vérifiez vos permissions.');\n        }\n      }\n    }\n  };\n\n  const stopCamera = () => {\n    if (streamRef.current) {\n      streamRef.current.getTracks().forEach(track => track.stop());\n      setStream(null);\n      streamRef.current = null;\n    }\n  };\n\n  const toggleMute = () => {\n    if (stream) {\n      const audioTrack = stream.getAudioTracks()[0];\n      if (audioTrack) {\n        audioTrack.enabled = !audioTrack.enabled;\n        setIsMuted(!isMuted);\n      }\n    }\n  };\n\n  const toggleVideo = () => {\n    if (stream) {\n      const videoTrack = stream.getVideoTracks()[0];\n      if (videoTrack) {\n        videoTrack.enabled = !videoTrack.enabled;\n        setIsVideoEnabled(!isVideoEnabled);\n      }\n    }\n  };\n\n  const startLive = async () => {\n    // Si pas de titre, utiliser un titre par défaut\n    const liveData = {\n      title: formData.title.trim() || `Live de ${user?.first_name || 'Utilisateur'}`,\n      description: formData.description.trim() || 'Live en cours...',\n      content: formData.content.trim() || 'Live démarré !'\n    };\n\n    setIsStarting(true);\n    try {\n      const response = await mediaAPI.startLive(liveData);\n      setLiveData(response);\n      setIsLive(true);\n      setLiveStartTime(Date.now()); // Démarrer le chronomètre\n      \n      // Démarrer l'enregistrement de la vidéo\n      if (stream && !mediaRecorderRef.current) {\n        const mediaRecorder = new MediaRecorder(stream, {\n          mimeType: 'video/webm;codecs=vp8,opus'\n        });\n        \n        mediaRecorderRef.current = mediaRecorder;\n        mediaRecorderRef.current.recordedChunks = [];\n        \n        mediaRecorderRef.current.ondataavailable = (event) => {\n          if (event.data.size > 0) {\n            mediaRecorderRef.current.recordedChunks.push(event.data);\n          }\n        };\n        \n        mediaRecorderRef.current.start(1000); // Enregistrer par segments de 1 seconde\n      }\n      \n      toast.success('Live démarré avec succès !');\n      onLiveStarted?.(response);\n      \n    } catch (error) {\n      console.error('Erreur démarrage live:', error);\n      toast.error('Erreur lors du démarrage du live');\n    } finally {\n      setIsStarting(false);\n    }\n  };\n\n  const stopLive = async () => {\n    if (!liveData) return;\n\n    try {\n      // Arrêter l'enregistrement si actif\n      if (mediaRecorderRef.current && mediaRecorderRef.current.state === 'recording') {\n        mediaRecorderRef.current.stop();\n      }\n\n      const response = await mediaAPI.stopLive(liveData.live_id);\n      setIsLive(false);\n      setLiveData(null);\n      setLiveStartTime(null); // Arrêter le chronomètre\n      setLiveDuration(0);\n      \n      // Créer une URL pour la vidéo enregistrée\n      if (mediaRecorderRef.current && mediaRecorderRef.current.recordedChunks && mediaRecorderRef.current.recordedChunks.length > 0) {\n        const blob = new Blob(mediaRecorderRef.current.recordedChunks, { type: 'video/webm' });\n        const videoUrl = URL.createObjectURL(blob);\n        setRecordedVideo(videoUrl);\n        \n        // Configurer la vidéo pour la lecture avec un délai pour s'assurer que le DOM est mis à jour\n        setTimeout(() => {\n          if (videoRef.current) {\n            videoRef.current.src = videoUrl;\n            videoRef.current.load();\n            videoRef.current.addEventListener('loadedmetadata', () => {\n              setVideoDuration(videoRef.current.duration);\n              setCurrentTime(0);\n              setIsPlaying(false);\n            });\n          }\n        }, 100);\n        \n        toast.success('Live arrêté - Vidéo disponible pour lecture');\n      } else {\n        toast.warning('Aucune vidéo enregistrée disponible');\n      }\n    } catch (error) {\n      console.error('Erreur arrêt live:', error);\n      toast.error('Erreur lors de l\\'arrêt du live');\n    }\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    startLive();\n  };\n\n  const sendChatMessage = () => {\n    if (!newMessage.trim()) return;\n    \n    const message = {\n      id: Date.now(),\n      author: user,\n      content: newMessage,\n      timestamp: new Date().toISOString()\n    };\n    \n    setChatMessages(prev => [...prev, message]);\n    setNewMessage('');\n  };\n\n  // Nouvelles fonctions pour les contrôles de niveau live\n  const handleVolumeChange = (newVolume) => {\n    setStreamVolume(newVolume);\n    if (stream) {\n      const audioTrack = stream.getAudioTracks()[0];\n      if (audioTrack) {\n        // Ajuster le volume du stream audio\n        const audioContext = new (window.AudioContext || window.webkitAudioContext)();\n        const source = audioContext.createMediaStreamSource(stream);\n        const gainNode = audioContext.createGain();\n        gainNode.gain.value = newVolume / 100;\n        source.connect(gainNode);\n      }\n    }\n  };\n\n  const handleQualityChange = (quality) => {\n    setVideoQuality(quality);\n    // Dans un vrai projet, vous ajusteriez la qualité du stream ici\n    toast.success(`Qualité vidéo changée vers ${quality}`);\n  };\n\n  const handleLatencyChange = (latency) => {\n    setStreamLatency(latency);\n    // Dans un vrai projet, vous ajusteriez la latence du stream ici\n    toast.success(`Latence changée vers ${latency}`);\n  };\n\n  const handleBitrateChange = (newBitrate) => {\n    setBitrate(newBitrate);\n    // Dans un vrai projet, vous ajusteriez le bitrate du stream ici\n    toast.success(`Bitrate changé vers ${newBitrate} kbps`);\n  };\n\n  const handleFpsChange = (newFps) => {\n    setFps(newFps);\n    // Dans un vrai projet, vous ajusteriez le FPS du stream ici\n    toast.success(`FPS changé vers ${newFps}`);\n  };\n\n  // Fonctions pour la lecture de la vidéo enregistrée\n  const togglePlayPause = () => {\n    if (videoRef.current && recordedVideo) {\n      if (isPlaying) {\n        videoRef.current.pause();\n        setIsPlaying(false);\n      } else {\n        const playPromise = videoRef.current.play();\n        if (playPromise !== undefined) {\n          playPromise\n            .then(() => {\n              setIsPlaying(true);\n            })\n            .catch(error => {\n              console.error('Erreur lors de la lecture:', error);\n              toast.error('Erreur lors de la lecture de la vidéo');\n            });\n        }\n      }\n    }\n  };\n\n  const handleTimeUpdate = () => {\n    if (videoRef.current) {\n      setCurrentTime(videoRef.current.currentTime);\n    }\n  };\n\n  const handleLoadedMetadata = () => {\n    if (videoRef.current) {\n      setVideoDuration(videoRef.current.duration);\n    }\n  };\n\n  const handleSeek = (e) => {\n    if (videoRef.current) {\n      const rect = e.currentTarget.getBoundingClientRect();\n      const clickX = e.clientX - rect.left;\n      const width = rect.width;\n      const seekTime = (clickX / width) * videoDuration;\n      videoRef.current.currentTime = seekTime;\n      setCurrentTime(seekTime);\n    }\n  };\n\n\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50\">\n      <div className=\"bg-white rounded-lg shadow-xl w-full max-w-6xl mx-4 max-h-[90vh] overflow-hidden\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-4 border-b\">\n          <h3 className=\"text-lg font-semibold text-gray-900\">\n            {isLive ? 'Live en cours' : recordedVideo ? 'Vidéo enregistrée' : 'Démarrer un live'}\n          </h3>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n          >\n            <X className=\"w-6 h-6\" />\n          </button>\n        </div>\n\n        <div className=\"flex h-[calc(90vh-120px)]\">\n          {/* Zone principale */}\n          <div className=\"flex-1 flex flex-col\">\n            {/* Prévisualisation vidéo */}\n            <div className=\"flex-1 bg-black relative\">\n              <video\n                ref={videoRef}\n                autoPlay={!recordedVideo}\n                muted={!recordedVideo}\n                playsInline\n                className=\"w-full h-full object-cover transform scale-x-[-1]\"\n                style={{ transform: recordedVideo ? 'none' : 'scaleX(-1)' }}\n                onTimeUpdate={handleTimeUpdate}\n                onLoadedMetadata={handleLoadedMetadata}\n                onPlay={() => setIsPlaying(true)}\n                onPause={() => setIsPlaying(false)}\n                onEnded={() => setIsPlaying(false)}\n              />\n              \n              {/* Badge Live avec chronomètre */}\n              {isLive && (\n                <div className=\"absolute top-4 left-4 bg-red-600 text-white px-3 py-1 rounded-full text-sm font-medium flex items-center space-x-1\">\n                  <div className=\"w-2 h-2 bg-white rounded-full animate-pulse\"></div>\n                  <span>EN DIRECT</span>\n                  <LiveTimer \n                    startTime={liveStartTime} \n                    isActive={isLive}\n                    variant=\"compact\"\n                    className=\"ml-2\"\n                  />\n                </div>\n              )}\n              \n              {/* Spectateurs */}\n              {isLive && (\n                <div className=\"absolute top-4 right-4 bg-black bg-opacity-50 text-white px-3 py-1 rounded-full text-sm\">\n                  {viewersCount} spectateurs\n                </div>\n              )}\n              \n              {/* Bouton démarrer le live - visible quand pas en live */}\n              {!isLive && stream && !recordedVideo && (\n                <div className=\"absolute inset-0 flex items-center justify-center bg-black bg-opacity-30\">\n                  <div className=\"text-center\">\n                    <div className=\"bg-white rounded-lg p-6 shadow-2xl max-w-md mx-4\">\n                      <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">\n                        Prêt à démarrer votre live ?\n                      </h3>\n                      <p className=\"text-gray-600 mb-6\">\n                        Votre caméra est active. Cliquez sur \"Démarrer le live\" pour commencer à diffuser.\n                      </p>\n                      <div className=\"flex space-x-3\">\n                        <button\n                          onClick={onClose}\n                          className=\"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors\"\n                        >\n                          Annuler\n                        </button>\n                        <button\n                          onClick={startLive}\n                          disabled={isStarting}\n                          className=\"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed\"\n                        >\n                          {isStarting ? (\n                            <>\n                              <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\n                              <span>Démarrage...</span>\n                            </>\n                          ) : (\n                            <>\n                              <Play className=\"w-4 h-4\" />\n                              <span>Démarrer le live</span>\n                            </>\n                          )}\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {/* Message si pas de caméra */}\n              {!stream && !isLive && !recordedVideo && (\n                <div className=\"absolute inset-0 flex items-center justify-center bg-gray-900\">\n                  <div className=\"text-center text-white\">\n                    <Camera className=\"w-16 h-16 mx-auto mb-4 text-gray-400\" />\n                    <h3 className=\"text-lg font-semibold mb-2\">Accès à la caméra</h3>\n                    <p className=\"text-gray-400 mb-4\">\n                      Autorisez l'accès à votre caméra pour commencer le live\n                    </p>\n                    <button\n                      onClick={startCamera}\n                      className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n                    >\n                      Autoriser la caméra\n                    </button>\n                  </div>\n                </div>\n              )}\n\n              {/* Message pour vidéo enregistrée en cours de chargement */}\n              {recordedVideo && !isLive && videoDuration === 0 && (\n                <div className=\"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50\">\n                  <div className=\"text-center text-white\">\n                    <div className=\"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-white mb-4\"></div>\n                    <h3 className=\"text-lg font-semibold mb-2\">Préparation de la vidéo</h3>\n                    <p className=\"text-gray-300\">\n                      Votre vidéo enregistrée est en cours de préparation...\n                    </p>\n                  </div>\n                </div>\n              )}\n              \n              {/* Contrôles de live */}\n              {isLive && (\n                <div className=\"absolute bottom-6 left-6 right-6 flex items-center justify-between bg-gradient-to-t from-black/80 to-transparent p-4 rounded-lg\">\n                <div className=\"flex items-center space-x-3\">\n                  {/* Chronomètre du live */}\n                  <LiveTimer \n                    startTime={liveStartTime}\n                    isActive={isLive}\n                    variant=\"detailed\"\n                    className=\"mr-4\"\n                  />\n                  <button\n                    onClick={toggleMute}\n                    className={`p-3 rounded-full transition-all duration-200 shadow-lg ${\n                      isMuted ? 'bg-red-500 text-white hover:bg-red-600' : 'bg-black/70 text-white hover:bg-black/90'\n                    }`}\n                    title={isMuted ? 'Activer le micro' : 'Désactiver le micro'}\n                  >\n                    {isMuted ? <MicOff className=\"w-5 h-5\" /> : <Mic className=\"w-5 h-5\" />}\n                  </button>\n                  \n                  <button\n                    onClick={toggleVideo}\n                    className={`p-3 rounded-full transition-all duration-200 shadow-lg ${\n                      !isVideoEnabled ? 'bg-red-500 text-white hover:bg-red-600' : 'bg-black/70 text-white hover:bg-black/90'\n                    }`}\n                    title={isVideoEnabled ? 'Désactiver la caméra' : 'Activer la caméra'}\n                  >\n                    {isVideoEnabled ? <Camera className=\"w-5 h-5\" /> : <CameraOff className=\"w-5 h-5\" />}\n                  </button>\n\n                  {/* Contrôles de niveau live */}\n                  {isLive && (\n                    <>\n                      {/* Contrôle du volume */}\n                      <div className=\"flex items-center space-x-2 bg-black/70 rounded-lg px-3 py-2 backdrop-blur-sm\">\n                        <Volume2 className=\"w-4 h-4 text-white\" />\n                        <input\n                          type=\"range\"\n                          min=\"0\"\n                          max=\"100\"\n                          value={streamVolume}\n                          onChange={(e) => handleVolumeChange(parseInt(e.target.value))}\n                          className=\"w-20 h-2 bg-gray-600 rounded-lg appearance-none cursor-pointer slider\"\n                        />\n                        <span className=\"text-white text-xs font-medium\">{streamVolume}%</span>\n                      </div>\n\n                      {/* Contrôle de la qualité */}\n                      <div className=\"flex items-center space-x-2 bg-black/70 rounded-lg px-3 py-2 backdrop-blur-sm\">\n                        <Monitor className=\"w-4 h-4 text-white\" />\n                        <select\n                          value={videoQuality}\n                          onChange={(e) => handleQualityChange(e.target.value)}\n                          className=\"bg-transparent text-white text-xs border-none outline-none font-medium\"\n                        >\n                          <option value=\"480p\">480p</option>\n                          <option value=\"720p\">720p</option>\n                          <option value=\"1080p\">1080p</option>\n                        </select>\n                      </div>\n\n                      {/* Bouton paramètres avancés */}\n                      <button\n                        onClick={() => setShowAdvancedControls(!showAdvancedControls)}\n                        className=\"p-3 rounded-full transition-all duration-200 bg-black/70 text-white hover:bg-black/90 shadow-lg\"\n                        title=\"Paramètres avancés\"\n                      >\n                        <Sliders className=\"w-5 h-5\" />\n                      </button>\n                    </>\n                  )}\n                </div>\n                \n                {isLive && (\n                  <button\n                    onClick={stopLive}\n                    className=\"bg-red-600 text-white px-6 py-3 rounded-lg hover:bg-red-700 transition-all duration-200 flex items-center space-x-2 shadow-lg font-medium\"\n                  >\n                    <Square className=\"w-4 h-4\" />\n                    <span>Arrêter le live</span>\n                  </button>\n                )}\n              </div>\n              )}\n\n              {/* Contrôles de lecture pour la vidéo enregistrée */}\n              {recordedVideo && !isLive && (\n                <div className=\"absolute bottom-6 left-6 right-6 bg-gradient-to-t from-black/80 to-transparent p-4 rounded-lg\">\n                  <div className=\"flex items-center justify-between mb-3\">\n                    <div className=\"flex items-center space-x-3\">\n                      <button\n                        onClick={togglePlayPause}\n                        className=\"p-3 rounded-full bg-black/70 text-white hover:bg-black/90 transition-all duration-200 shadow-lg\"\n                        title={isPlaying ? 'Pause' : 'Lecture'}\n                      >\n                        {isPlaying ? (\n                          <div className=\"w-5 h-5 flex items-center justify-center\">\n                            <div className=\"w-1 h-4 bg-white mx-0.5\"></div>\n                            <div className=\"w-1 h-4 bg-white mx-0.5\"></div>\n                          </div>\n                        ) : (\n                          <Play className=\"w-5 h-5\" />\n                        )}\n                      </button>\n                      \n                      <div className=\"text-white text-sm font-medium\">\n                        {videoDuration > 0 ? `${formatTime(currentTime)} / ${formatTime(videoDuration)}` : 'Chargement...'}\n                      </div>\n                    </div>\n                    \n                    <button\n                      onClick={onClose}\n                      className=\"text-white hover:text-gray-300 transition-colors\"\n                      title=\"Fermer\"\n                    >\n                      <X className=\"w-5 h-5\" />\n                    </button>\n                  </div>\n                  \n                  {/* Barre de progression */}\n                  <div \n                    className=\"w-full h-2 bg-gray-600 rounded-full cursor-pointer relative\"\n                    onClick={handleSeek}\n                  >\n                    <div \n                      className=\"h-full bg-red-600 rounded-full transition-all duration-200\"\n                      style={{ width: `${videoDuration > 0 ? (currentTime / videoDuration) * 100 : 0}%` }}\n                ></div>\n              </div>\n                  \n                  {/* Message d'information */}\n                  {videoDuration === 0 && (\n                    <div className=\"text-center text-white text-sm mt-2\">\n                      <div className=\"inline-block animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                      Préparation de la vidéo...\n                    </div>\n                  )}\n                </div>\n              )}\n\n              {/* Panneau de contrôles avancés */}\n              {isLive && showAdvancedControls && (\n                <div className=\"absolute bottom-32 left-6 bg-black/95 text-white rounded-lg p-6 space-y-4 min-w-80 live-controls-panel backdrop-blur-sm shadow-2xl border border-white/10\">\n                  <div className=\"flex items-center justify-between\">\n                    <h4 className=\"font-medium\">Paramètres avancés</h4>\n                    <button\n                      onClick={() => setShowAdvancedControls(false)}\n                      className=\"text-gray-400 hover:text-white\"\n                    >\n                      <X className=\"w-4 h-4\" />\n                    </button>\n                  </div>\n                  \n                  <div className=\"space-y-3\">\n                    {/* Latence */}\n                    <div>\n                      <label className=\"block text-xs text-gray-300 mb-1\">Latence</label>\n                      <select\n                        value={streamLatency}\n                        onChange={(e) => handleLatencyChange(e.target.value)}\n                        className=\"w-full bg-gray-800 text-white text-sm rounded px-2 py-1\"\n                      >\n                        <option value=\"ultra-low\">Ultra-faible</option>\n                        <option value=\"low\">Faible</option>\n                        <option value=\"medium\">Moyenne</option>\n                        <option value=\"high\">Élevée</option>\n                      </select>\n                    </div>\n\n                    {/* Bitrate */}\n                    <div>\n                      <label className=\"block text-xs text-gray-300 mb-1\">Bitrate (kbps)</label>\n                      <input\n                        type=\"range\"\n                        min=\"1000\"\n                        max=\"6000\"\n                        step=\"500\"\n                        value={bitrate}\n                        onChange={(e) => handleBitrateChange(parseInt(e.target.value))}\n                        className=\"w-full h-2 bg-gray-600 rounded-lg appearance-none cursor-pointer slider\"\n                      />\n                      <div className=\"flex justify-between text-xs text-gray-300\">\n                        <span>1000</span>\n                        <span>{bitrate}</span>\n                        <span>6000</span>\n                      </div>\n                    </div>\n\n                    {/* FPS */}\n                    <div>\n                      <label className=\"block text-xs text-gray-300 mb-1\">FPS</label>\n                      <select\n                        value={fps}\n                        onChange={(e) => handleFpsChange(parseInt(e.target.value))}\n                        className=\"w-full bg-gray-800 text-white text-sm rounded px-2 py-1\"\n                      >\n                        <option value={24}>24 FPS</option>\n                        <option value={30}>30 FPS</option>\n                        <option value={60}>60 FPS</option>\n                      </select>\n                    </div>\n\n                    {/* Statistiques de streaming */}\n                    <div className=\"pt-2 border-t border-gray-700\">\n                      <div className=\"flex items-center space-x-2 text-xs\">\n                        <Wifi className=\"w-3 h-3\" />\n                        <span>Connexion stable</span>\n                      </div>\n                      <div className=\"flex items-center space-x-2 text-xs mt-1\">\n                        <Activity className=\"w-3 h-3\" />\n                        <span>Latence: {streamLatency === 'ultra-low' ? '< 1s' : streamLatency === 'low' ? '1-2s' : '2-3s'}</span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {/* Message pour la vidéo enregistrée */}\n              {recordedVideo && !isLive && (\n                <div className=\"absolute top-4 left-4 bg-green-600 text-white px-3 py-1 rounded-full text-sm font-medium flex items-center space-x-1\">\n                  <div className=\"w-2 h-2 bg-white rounded-full\"></div>\n                  <span>VIDÉO ENREGISTRÉE</span>\n                </div>\n              )}\n            </div>\n\n            {/* Formulaire de configuration */}\n            {!isLive && (\n              <div className=\"p-4 border-t\">\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Titre du live *\n                    </label>\n                    <input\n                      type=\"text\"\n                      name=\"title\"\n                      value={formData.title}\n                      onChange={(e) => setFormData(prev => ({ ...prev, title: e.target.value }))}\n                      placeholder=\"Titre de votre live...\"\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                      required\n                    />\n                  </div>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Description (optionnel)\n                    </label>\n                    <textarea\n                      name=\"description\"\n                      value={formData.description}\n                      onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\n                      placeholder=\"Description de votre live...\"\n                      rows={2}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none\"\n                    />\n                  </div>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Message de publication\n                    </label>\n                    <textarea\n                      name=\"content\"\n                      value={formData.content}\n                      onChange={(e) => setFormData(prev => ({ ...prev, content: e.target.value }))}\n                      placeholder=\"Message accompagnant votre live...\"\n                      rows={2}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none\"\n                    />\n                  </div>\n                  \n                  <div className=\"flex justify-end space-x-3\">\n                    <button\n                      type=\"button\"\n                      onClick={onClose}\n                      className=\"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors\"\n                    >\n                      Annuler\n                    </button>\n                    <button\n                      type=\"submit\"\n                      disabled={isStarting}\n                      className=\"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2\"\n                    >\n                      {isStarting ? (\n                        <>\n                          <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\n                          <span>Démarrage...</span>\n                        </>\n                      ) : (\n                        <>\n                          <Play className=\"w-4 h-4\" />\n                          <span>Démarrer le live</span>\n                        </>\n                      )}\n                    </button>\n                  </div>\n                </form>\n              </div>\n            )}\n          </div>\n\n          {/* Chat */}\n          {isLive && (\n            <div className=\"w-80 border-l border-gray-200 flex flex-col\">\n              <div className=\"p-4 border-b\">\n                <div className=\"flex items-center justify-between\">\n                  <h4 className=\"font-medium text-gray-900\">Chat en direct</h4>\n                  <button\n                    onClick={() => setShowChat(!showChat)}\n                    className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n                  >\n                    <MessageCircle className=\"w-5 h-5\" />\n                  </button>\n                </div>\n              </div>\n              \n              {showChat && (\n                <>\n                  <div className=\"flex-1 p-4 overflow-y-auto space-y-3\">\n                    {chatMessages.map((message) => (\n                      <div key={message.id} className=\"flex space-x-2\">\n                        <img\n                          src={message.author?.profile_picture || '/default-avatar.svg'}\n                          alt={message.author?.first_name || 'Utilisateur'}\n                          className=\"w-6 h-6 rounded-full object-cover flex-shrink-0\"\n                          onError={(e) => {\n                            e.target.src = '/default-avatar.svg';\n                          }}\n                        />\n                        <div className=\"flex-1\">\n                          <div className=\"bg-gray-50 rounded-lg px-3 py-2\">\n                            <div className=\"flex items-center space-x-2\">\n                              <span className=\"text-sm font-medium text-gray-900\">\n                                {message.author?.first_name || 'Utilisateur'} {message.author?.last_name || ''}\n                              </span>\n                              <span className=\"text-xs text-gray-500\">\n                                {new Date(message.timestamp).toLocaleTimeString('fr-FR', { \n                                  hour: '2-digit', \n                                  minute: '2-digit' \n                                })}\n                              </span>\n                            </div>\n                            <p className=\"text-sm text-gray-700 mt-1\">{message.content}</p>\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                  \n                  <div className=\"p-4 border-t\">\n                    <form onSubmit={(e) => { e.preventDefault(); sendChatMessage(); }} className=\"flex space-x-2\">\n                      <input\n                        type=\"text\"\n                        value={newMessage}\n                        onChange={(e) => setNewMessage(e.target.value)}\n                        placeholder=\"Tapez votre message...\"\n                        className=\"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm\"\n                      />\n                      <button\n                        type=\"submit\"\n                        disabled={!newMessage.trim()}\n                        className=\"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n                      >\n                        <Send className=\"w-4 h-4\" />\n                      </button>\n                    </form>\n                  </div>\n                </>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default LiveStream; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}